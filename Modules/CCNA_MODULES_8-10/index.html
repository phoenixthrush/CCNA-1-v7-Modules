<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cisco CCNA v7 - Modules 8-10</title>
    <meta name="darkreader-lock">
    <meta name="theme-color" content="#000">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
            font-size: 1.1em;
            color: #e8e6e1;
        }
        
        #questions-container {
            max-width: 900px;
            margin: 0 auto 30px;
            background: #222425;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            padding: 40px;
            border: 1px solid #3a3d3f;
            position: relative;
        }
        
        .question-counter {
            position: absolute;
            bottom: 20px;
            right: 30px;
            font-size: 0.95em;
            color: #8ab4f8;
            font-weight: 600;
        }
        
        #questions-container>div>p:first-child {
            font-size: 1.4em;
            font-weight: 600;
            color: #e8e6e1;
            margin-bottom: 25px;
            line-height: 1.5;
            white-space: pre-line;
        }
        
        #questions-container img {
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        ul {
            list-style-type: none;
            margin: 25px 0;
        }
        
        li {
            margin: 12px 0;
            transition: all 0.3s ease;
        }
        
        input[type="radio"],
        input[type="checkbox"] {
            display: none;
        }
        
        label {
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #2d2e30;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid #3a3d3f;
            color: #e8e6e1;
        }
        
        label:hover {
            background: #3a3d3f;
            border-color: #8ab4f8;
        }
        
        input:checked+label {
            background: #3a3d3f;
            border-color: #8ab4f8;
            font-weight: 500;
            color: #8ab4f8;
        }
        
        input:disabled+label {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        li label img {
            margin: 10px 0 0 0;
            max-width: 100%;
            border-radius: 8px;
        }
        
        .image-loader {
            display: inline-block;
            width: 100%;
            height: 300px;
            background: #2d2e30;
            border-radius: 8px;
            margin: 10px 0 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8ab4f8;
            font-weight: 600;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
        
            0%,
            100% {
                opacity: 0.6;
            }
        
            50% {
                opacity: 1;
            }
        }
        
        #result-msg {
            margin-top: 25px;
            font-size: 1.3em;
            font-weight: 700;
            padding: 15px 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        li[style*="color: green"] label {
            color: #8bc34a;
            font-weight: 600;
            border-color: #8bc34a;
        }
        
        li.correct-answer label {
            border: 2px solid #8bc34a;
        }
        
        li.wrong-answer label {
            border: 2px solid #ef4444;
        }
        
        #explanation-msg {
            margin-top: 20px;
            padding: 18px 20px;
            background: #2d2e30;
            border-left: 4px solid #ff9800;
            border-radius: 6px;
            color: #e8e6e1;
            line-height: 1.6;
            font-style: normal;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        #next-btn {
            display: block;
            margin: 30px auto 0;
            background: #8ab4f8;
            color: #181a1b;
            border: none;
            padding: 14px 45px;
            font-size: 1.05em;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(138, 180, 248, 0.3);
        }
        
        #next-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            background: #a8c8ff;
            box-shadow: 0 6px 20px rgba(138, 180, 248, 0.5);
        }
        
        #next-btn:active:not(:disabled) {
            transform: translateY(0);
        }
        
        #next-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        @media (max-width: 768px) {
            #questions-container {
                padding: 25px;
            }
        
            #questions-container>div>p:first-child {
                font-size: 1.2em;
            }
        
            body {
                padding: 20px 10px;
            }
        }
        
        .copyright {
            font-size: 0.85em;
            color: rgba(232, 230, 225, 0.3);
            position: fixed;
            bottom: 15px;
            right: 20px;
            margin: 0;
        }
        
        .copyright a {
            color: rgba(232, 230, 225, 0.3);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .copyright a:hover {
            color: rgba(232, 230, 225, 0.7);
            text-decoration: underline;
        }
        
        .summary-actions {
            margin-top: 20px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .summary-actions button {
            background: #8ab4f8;
            color: #181a1b;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(138, 180, 248, 0.3);
        }
        
        .summary-actions button:hover {
            transform: translateY(-2px);
            background: #a8c8ff;
            box-shadow: 0 6px 20px rgba(138, 180, 248, 0.5);
        }
        
        .review-block {
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #3a3d3f;
        }
        
        .review-explanation {
            margin-top: 10px;
            padding: 12px;
            background: #2d2e30;
            border-left: 4px solid #ff9800;
            border-radius: 6px;
        }
    </style>
</head>

<body>
    <div id="questions-container"></div>
    <button id="next-btn">Submit</button>
    <div class="copyright">
        <a href="https://phoenixthrush.com" target="_blank" rel="noopener noreferrer">Â© 2025-2026 phoenixthrush</a>
    </div>
    <script>
        const ALLOW_SKIP = true;
        
        function shuffle(arr) {
            const a = [...arr];
            for (let i = a.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }
        
        const container = document.getElementById('questions-container');
        const nextBtn = document.getElementById('next-btn');
        
        let questions = [];
        let originalQuestions = [];
        
        let currentIndex = 0;
        let answered = false;
        
        let correctCount = 0;
        let answeredCount = 0;
        let skippedCount = 0;
        
        function sanitizeQuestions(data) {
            const seen = new Set();
            const cleaned = [];
        
            for (const item of data) {
                if (!item || typeof item.question !== 'string') continue;
        
                const question = item.question.trim();
                if (!question) continue;
        
                const optionsRaw = Array.isArray(item.options)
                    ? item.options.filter(o => typeof o === 'string')
                    : [];
                const options = optionsRaw.map(o => o.trim()).filter(o => o.length > 0);
        
                const optMap = new Map(options.map(o => [o.toLowerCase(), o]));
        
                const corrRaw = Array.isArray(item.correct_answers)
                    ? item.correct_answers.filter(o => typeof o === 'string')
                    : [];
        
                let correct = [];
                for (const c of corrRaw) {
                    const cTrim = c.trim();
                    if (!cTrim) continue;
        
                    if (options.includes(cTrim)) {
                        correct.push(cTrim);
                        continue;
                    }
        
                    const mapped = optMap.get(cTrim.toLowerCase());
                    if (mapped) correct.push(mapped);
                }
        
                correct = [...new Set(correct)];
        
                if (options.length === 0 || correct.length === 0) continue;
        
                const key = question.toLowerCase().replace(/\s+/g, ' ');
                if (seen.has(key)) continue;
        
                seen.add(key);
                cleaned.push({ ...item, question, options, correct_answers: correct });
            }
        
            return cleaned;
        }
        
        async function loadQuestions() {
            try {
                const rawJson = `
                    [
                        {
                            "question": "Which information is used by routers to forward a data packet toward its destination?",
                            "options": [
                                "source IP address",
                                "destination IP address",
                                "source data-link address",
                                "destination data-link address"
                            ],
                            "correct_answers": [
                                "destination IP address"
                            ]
                        },
                        {
                            "question": "A computer has to send a packet to a destination host in the same LAN. How will the packet be sent?",
                            "options": [
                                "The packet will be sent to the default gateway first, and then, depending on the response from the gateway, it may be sent to the destination host.",
                                "The packet will be sent directly to the destination host.",
                                "The packet will first be sent to the default gateway, and then from the default gateway it will be sent directly to the destination host.",
                                "The packet will be sent only to the default gateway."
                            ],
                            "correct_answers": [
                                "The packet will be sent directly to the destination host."
                            ]
                        },
                        {
                            "question": "A router receives a packet from the Gigabit 0/0 interface and determines that the packet needs to be forwarded out the Gigabit 0/1 interface. What will the router do next?",
                            "options": [
                                "route the packet out the Gigabit 0/1 interface",
                                "create a new Layer 2 Ethernet frame to be sent to the destination",
                                "look into the ARP cache to determine the destination IP address",
                                "look into the routing table to determine if the destination network is in the routing table"
                            ],
                            "correct_answers": [
                                "create a new Layer 2 Ethernet frame to be sent to the destination"
                            ]
                        },
                        {
                            "question": "Which IPv4 address can a host use to ping the loopback interface?",
                            "options": [
                                "126.0.0.1",
                                "127.0.0.0",
                                "126.0.0.0",
                                "127.0.0.1"
                            ],
                            "correct_answers": [
                                "127.0.0.1"
                            ]
                        },
                        {
                            "question": "A computer can access devices on the same network but cannot access devices on other networks. What is the probable cause of this problem?",
                            "options": [
                                "The cable is not connected properly to the NIC.",
                                "The computer has an invalid IP address.",
                                "The computer has an incorrect subnet mask.",
                                "The computer has an invalid default gateway address."
                            ],
                            "correct_answers": [
                                "The computer has an invalid default gateway address."
                            ]
                        },
                        {
                            "question": "Which statement describes a feature of the IP protocol?",
                            "options": [
                                "IP encapsulation is modified based on network media.",
                                "IP relies on Layer 2 protocols for transmission error control.",
                                "MAC addresses are used during the IP packet encapsulation.",
                                "IP relies on upper layer services to handle situations of missing or out-of-order packets."
                            ],
                            "correct_answers": [
                                "IP relies on upper layer services to handle situations of missing or out-of-order packets."
                            ],
                            "explanation": "IP protocol is a connection-less protocol, considered unreliable in terms of end-to-end delivery. It does not provide error control in the cases where receiving packets are out-of-order or in cases of missing packets. It relies on upper layer services, such as TCP, to resolve these issues."
                        },
                        {
                            "question": "Why is NAT not needed in IPv6?",
                            "options": [
                                "Because IPv6 has integrated security, there is no need to hide the IPv6 addresses of internal networks.",
                                "Any host or user can get a public IPv6 network address because the number of available IPv6 addresses is extremely large.",
                                "The problems that are induced by NAT applications are solved because the IPv6 header improves packet handling by intermediate routers.",
                                "The end-to-end connectivity problems that are caused by NAT are solved because the number of routes increases with the number of nodes that are connected to the Internet."
                            ],
                            "correct_answers": [
                                "Any host or user can get a public IPv6 network address because the number of available IPv6 addresses is extremely large."
                            ],
                            "explanation": "The large number of public IPv6 addresses eliminates the need for NAT. Sites from the largest enterprises to single households can get public IPv6 network addresses. This avoids some of the NAT-induced application problems that are experienced by applications that require end-to-end connectivity."
                        },
                        {
                            "question": "Which parameter does the router use to choose the path to the destination when there are multiple routes available?",
                            "options": [
                                "the lower metric value that is associated with the destination network",
                                "the lower gateway IP address to get to the destination network",
                                "the higher metric value that is associated with the destination network",
                                "the higher gateway IP address to get to the destination network"
                            ],
                            "correct_answers": [
                                "the lower metric value that is associated with the destination network"
                            ]
                        },
                        {
                            "question": "What are two services provided by the OSI network layer? (Choose two.)",
                            "options": [
                                "performing error detection",
                                "routing packets toward the destination",
                                "encapsulating PDUs from the transport layer",
                                "placement of frames on the media",
                                "collision detection"
                            ],
                            "correct_answers": [
                                "routing packets toward the destination",
                                "encapsulating PDUs from the transport layer"
                            ],
                            "explanation": "The OSI network layer provides several services to allow communication between devices: addressing encapsulation routing de-encapsulation Error detection, placing frames on the media, and collision detection are all functions of the data ink layer."
                        },
                        {
                            "question": "Within a production network, what is the purpose of configuring a switch with a default gateway address?",
                            "options": [
                                "Hosts that are connected to the switch can use the switch default gateway address to forward packets to a remote destination.",
                                "A switch must have a default gateway to be accessible by Telnet and SSH.",
                                "The default gateway address is used to forward packets originating from the switch to remote networks.",
                                "It provides a next-hop address for all traffic that flows through the switch."
                            ],
                            "correct_answers": [
                                "The default gateway address is used to forward packets originating from the switch to remote networks."
                            ],
                            "explanation": "A default gateway address allows a switch to forward packets that originate on the switch to remote networks. A default gateway address on a switch does not provide Layer 3 routing for PCs that are connected on that switch. A switch can still be accessible from Telnet as long as the source of the Telnet connection is on the local network."
                        },
                        {
                            "question": "What is a basic characteristic of the IP protocol?",
                            "options": [
                                "connectionless",
                                "media dependent",
                                "user data segmentation",
                                "reliable end-to-end delivery"
                            ],
                            "correct_answers": [
                                "connectionless"
                            ],
                            "explanation": "Internet Protocol (IP) is a network layer protocol that does not require initial exchange of control information to establish an end-to-end connection before packets are forwarded. Thus, IP is connectionless and does not provide reliable end-to-end delivery by itself. IP is media independent. User data segmentation is a service provided at the transport layer."
                        },
                        {
                            "question": "Which field in the IPv4 header is used to prevent a packet from traversing a network endlessly?",
                            "options": [
                                "Time-to-Live",
                                "Sequence Number",
                                "Acknowledgment Number",
                                "Differentiated Services"
                            ],
                            "correct_answers": [
                                "Time-to-Live"
                            ],
                            "explanation": "The value of the Time-to-Live (TTL) field in the IPv4 header is used to limit the lifetime of a packet. The sending host sets the initial TTL value; which is decreased by one each time the packet is processed by a router. If the TTL field decrements to zero, the router discards the packet and sends an Internet Control Message Protocol (ICMP) Time Exceeded message to the source IP address. The Differentiated Services (DS) field is used to determine the priority of each packet. Sequence Number and Acknowledgment Number are two fields in the TCP header."
                        },
                        {
                            "question": "What is one advantage that the IPv6 simplified header offers over IPv4?",
                            "options": [
                                "smaller-sized header",
                                "little requirement for processing checksums",
                                "smaller-sized source and destination IP addresses",
                                "efficient packet handling"
                            ],
                            "correct_answers": [
                                "efficient packet handling"
                            ],
                            "explanation": "The IPv6 simplified header offers several advantages over IPv4: Better routing efficiency and efficient packet handling for performance and forwarding-rate scalability No requirement for processing checksums Simplified and more efficient extension header mechanisms (as opposed to the IPv4 Options field) A Flow Label field for per-flow processing with no need to open the transport inner packet to identify the various traffic flows"
                        },
                        {
                            "question": "What IPv4 header field identifies the upper layer protocol carried in the packet?",
                            "options": [
                                "Protocol",
                                "Identification",
                                "Version",
                                "Differentiated Services"
                            ],
                            "correct_answers": [
                                "Protocol"
                            ],
                            "explanation": "It is the Protocol field in the IP header that identifies the upper-layer protocol the packet is carrying. The Version field identifies the IP version. The Differential Services field is used for setting packet priority. The Identification field is used to reorder fragmented packets."
                        },
                        {
                            "question": "Refer to the exhibit. Match the packets with their destination IP address to the exiting interfaces on the router. (Not all targets are used.) Place the options in the following order: packets with destination of 172.17.6.15 FastEthernet0/0 packets with destination of 172.17.14.8 FastEthernet0/1 packets with destination of 172.17.12.10 FastEthernet1/0 packets with destination of 172.17.10.5 FastEthernet1/1 packets with destination of 172.17.8.20 Serial0/0/0 Explanation: Packets with a destination of 172.17.6.15 are forwarded through Fa0/0. Packets with a destination of 172.17.10.5 are forwarded through Fa1/1. Packets with a destination of 172.17.12.10 are forwarded through Fa1/0. Packets with a destination of 172.17.14.8 are forwarded through Fa0/1. Because network 172.17.8.0 has no entry in the routing table, it will take the gateway of last resort, which means that packets with a destination of 172.17.8.20 are forwarded through Serial0/0/0. Because a gateway of last resort exists, no packets will be dropped. 16. What information does the loopback test provide?",
                            "options": [
                                "The TCP/IP stack on the device is working correctly.",
                                "The device has end-to-end connectivity.",
                                "DHCP is working correctly.",
                                "The Ethernet cable is working correctly.",
                                "The device has the correct IP address on the network."
                            ],
                            "correct_answers": [
                                "The TCP/IP stack on the device is working correctly."
                            ],
                            "explanation": "Because the loopback test sends packets back to the host device, it does not provide information about network connectivity to other hosts. The loopback test verifies that the host NIC, drivers, and TCP/IP stack are functioning."
                        },
                        {
                            "question": "What routing table entry has a next hop address associated with a destination network?",
                            "options": [
                                "directly-connected routes",
                                "local routes",
                                "remote routes",
                                "C and L source routes"
                            ],
                            "correct_answers": [
                                "remote routes"
                            ],
                            "explanation": "Routing table entries for remote routes will have a next hop IP address. The next hop IP address is the address of the router interface of the next device to be used to reach the destination network. Directly-connected and local routes have no next hop, because they do not require going through another router to be reached."
                        },
                        {
                            "question": "How do hosts ensure that their packets are directed to the correct network destination?",
                            "options": [
                                "They have to keep their own local routing table that contains a route to the loopback interface, a local network route, and a remote default route.",
                                "They always direct their packets to the default gateway, which will be responsible for the packet delivery.",
                                "They search in their own local routing table for a route to the network destination address and pass this information to the default gateway.",
                                "They send a query packet to the default gateway asking for the best route."
                            ],
                            "correct_answers": [
                                "They have to keep their own local routing table that contains a route to the loopback interface, a local network route, and a remote default route."
                            ],
                            "explanation": "Hosts must maintain their own local routing table to ensure that network layer packets are directed to the correct destination network. This local table typically contains a route to the loopback interface, a route to the network that the host is connected to, and a local default route, which represents the route that packets must take to reach all remote network addresses."
                        },
                        {
                            "question": "When transporting data from real-time applications, such as streaming audio and video, which field in the IPv6 header can be used to inform the routers and switches to maintain the same path for the packets in the same conversation?",
                            "options": [
                                "Next Header",
                                "Flow Label",
                                "Traffic Class",
                                "Differentiated Services"
                            ],
                            "correct_answers": [
                                "Flow Label"
                            ],
                            "explanation": "The Flow Label in IPv6 header is a 20-bit field that provides a special service for real-time applications. This field can be used to inform routers and switches to maintain the same path for the packet flow so that packets will not be reordered."
                        },
                        {
                            "question": "What statement describes the function of the Address Resolution Protocol?",
                            "options": [
                                "ARP is used to discover the IP address of any host on a different network.",
                                "ARP is used to discover the IP address of any host on the local network.",
                                "ARP is used to discover the MAC address of any host on a different network.",
                                "ARP is used to discover the MAC address of any host on the local network."
                            ],
                            "correct_answers": [
                                "ARP is used to discover the MAC address of any host on the local network."
                            ],
                            "explanation": "When a PC wants to send data on the network, it always knows the IP address of the destination. However, it also needs to discover the MAC address of the destination. ARP is the protocol that is used to discover the MAC address of a host that belongs to the same network."
                        },
                        {
                            "question": "Under which two circumstances will a switch flood a frame out of every port except the port that the frame was received on? (Choose two.)",
                            "options": [
                                "The frame has the broadcast address as the destination address.",
                                "The destination address is unknown to the switch.",
                                "The source address in the frame header is the broadcast address.",
                                "The source address in the frame is a multicast address.",
                                "The destination address in the frame is a known unicast address."
                            ],
                            "correct_answers": [
                                "The frame has the broadcast address as the destination address.",
                                "The destination address is unknown to the switch."
                            ],
                            "explanation": "A switch will flood a frame out of every port, except the one that the frame was received from, under two circumstances. Either the frame has the broadcast address as the destination address, or the destination address is unknown to the switch."
                        },
                        {
                            "question": "Which statement describes the treatment of ARP requests on the local link?",
                            "options": [
                                "They must be forwarded by all routers on the local network.",
                                "They are received and processed by every device on the local network.",
                                "They are dropped by all switches on the local network.",
                                "They are received and processed only by the target device."
                            ],
                            "correct_answers": [
                                "They are received and processed by every device on the local network."
                            ],
                            "explanation": "One of the negative issues with ARP requests is that they are sent as a broadcast. This means all devices on the local link must receive and process the request."
                        },
                        {
                            "question": "Which destination address is used in an ARP request frame?",
                            "options": [
                                "0.0.0.0",
                                "255.255.255.255",
                                "FFFF.FFFF.FFFF",
                                "AAAA.AAAA.AAAA",
                                "the physical address of the destination host"
                            ],
                            "correct_answers": [
                                "FFFF.FFFF.FFFF"
                            ],
                            "explanation": "The purpose of an ARP request is to find the MAC address of the destination host on an Ethernet LAN. The ARP process sends a Layer 2 broadcast to all devices on the Ethernet LAN. The frame contains the IP address of the destination and the broadcast MAC address, FFFF.FFFF.FFFF. The host with the IP address that matches the IP address in the ARP request will reply with a unicast frame that includes the MAC address of the host. Thus the original sending host will obtain the destination IP and MAC address pair to continue the encapsulation process for data transmission."
                        },
                        {
                            "question": "A network technician issues the arp -d * command on a PC after the router that is connected to the LAN is reconfigured. What is the result after this command is issued?",
                            "options": [
                                "The ARP cache is cleared.",
                                "The current content of the ARP cache is displayed.",
                                "The detailed information of the ARP cache is displayed.",
                                "The ARP cache is synchronized with the router interface."
                            ],
                            "correct_answers": [
                                "The ARP cache is cleared."
                            ],
                            "explanation": "Issuing the arp -d * command on a PC will clear the ARP cache content. This is helpful when a network technician wants to ensure the cache is populated with updated information."
                        },
                        {
                            "question": "Refer to the exhibit. The exhibit shows a small switched network and the contents of the MAC address table of the switch. PC1 has sent a frame addressed to PC3. What will the switch do with the frame?",
                            "options": [
                                "The switch will discard the frame.",
                                "The switch will forward the frame only to port 2.",
                                "The switch will forward the frame to all ports except port 4.",
                                "The switch will forward the frame to all ports.",
                                "The switch will forward the frame only to ports 1 and 3."
                            ],
                            "correct_answers": [
                                "The switch will forward the frame to all ports except port 4."
                            ],
                            "explanation": "The MAC address of PC3 is not present in the MAC table of the switch. Because the switch does not know where to send the frame that is addressed to PC3, it will forward the frame to all the switch ports, except for port 4, which is the incoming port."
                        },
                        {
                            "question": "Which two types of IPv6 messages are used in place of ARP for address resolution?",
                            "options": [
                                "anycast",
                                "broadcast",
                                "echo reply",
                                "echo request",
                                "neighbor solicitation",
                                "neighbor advertisement"
                            ],
                            "correct_answers": [
                                "neighbor solicitation",
                                "neighbor advertisement"
                            ],
                            "explanation": "IPv6 does not use ARP. Instead, ICMPv6 neighbor discovery is used by sending neighbor solicitation and neighbor advertisement messages."
                        },
                        {
                            "question": "What is the aim of an ARP spoofing attack?",
                            "options": [
                                "to flood the network with ARP reply broadcasts",
                                "to fill switch MAC address tables with bogus addresses",
                                "to associate IP addresses to the wrong MAC address",
                                "to overwhelm network hosts with ARP requests"
                            ],
                            "correct_answers": [
                                "to associate IP addresses to the wrong MAC address"
                            ],
                            "explanation": "In an ARP spoofing attack, a malicious host intercepts ARP requests and replies to them so that network hosts will map an IP address to the MAC address of the malicious host."
                        },
                        {
                            "question": "Refer to the exhibit. PC1 attempts to connect to File_server1 and sends an ARP request to obtain a destination MAC address. Which MAC address will PC1 receive in the ARP reply?",
                            "options": [
                                "the MAC address of S1",
                                "the MAC address of the G0/0 interface on R1",
                                "the MAC address of the G0/0 interface on R2",
                                "the MAC address of S2",
                                "the MAC address of File_server1"
                            ],
                            "correct_answers": [
                                "the MAC address of the G0/0 interface on R1"
                            ],
                            "explanation": "PC1 must have a MAC address to use as a destination Layer 2 address. PC1 will send an ARP request as a broadcast and R1 will send back an ARP reply with its G0/0 interface MAC address. PC1 can then forward the packet to the MAC address of the default gateway, R1."
                        },
                        {
                            "question": "Where are IPv4 address to Layer 2 Ethernet address mappings maintained on a host computer?",
                            "options": [
                                "neighbor table",
                                "ARP cache",
                                "routing table",
                                "MAC address table"
                            ],
                            "correct_answers": [
                                "ARP cache"
                            ],
                            "explanation": "The ARP cache is used to store IPv4 addresses and the Ethernet physical addresses or MAC addresses to which the IPv4 addresses are mapped. Incorrect mappings of IP addresses to MAC addresses can result in loss of end-to-end connectivity."
                        },
                        {
                            "question": "What important information is examined in the Ethernet frame header by a Layer 2 device in order to forward the data onward?",
                            "options": [
                                "source MAC address",
                                "source IP address",
                                "destination MAC address",
                                "Ethernet type",
                                "destination IP address"
                            ],
                            "correct_answers": [
                                "destination MAC address"
                            ],
                            "explanation": "The Layer 2 device, such as a switch, uses the destination MAC address to determine which path (interface or port) should be used to send the data onward to the destination device."
                        },
                        {
                            "question": "Match the commands to the correct actions. (Not all options are used.)",
                            "options": [],
                            "correct_answers": []
                        },
                        {
                            "question": "A new network administrator has been asked to enter a banner message on a Cisco device. What is the fastest way a network administrator could test whether the banner is properly configured?",
                            "options": [
                                "Reboot the device.",
                                "Enter CTRL-Z at the privileged mode prompt.",
                                "Exit global configuration mode.",
                                "Power cycle the device.",
                                "Exit privileged EXEC mode and press Enter."
                            ],
                            "correct_answers": [
                                "Exit privileged EXEC mode and press Enter."
                            ],
                            "explanation": "While at the privileged mode prompt such as Router#, type exit,press Enter, and the banner message appears. Power cycling a network device that has had the banner motd command issued will also display the banner message, but this is not a quick way to test the configuration."
                        },
                        {
                            "question": "A network administrator requires access to manage routers and switches locally and remotely. Match the description to the access method. (Not all options are used.)",
                            "options": [],
                            "correct_answers": [],
                            "explanation": "Both the console and AUX ports can be used to directly connect to a Cisco network device for management purposes. However, it is more common to use the console port. The AUX port is more often used for remote access via a dial up connection. SSH and Telnet are both remote access methods that depend on an active network connection. SSH uses a stronger password authentication than Telnet uses and also uses encryption on transmitted data."
                        },
                        {
                            "question": "Match the phases to the functions during the boot up process of a Cisco router. (Not all options are used.)",
                            "options": [],
                            "correct_answers": [],
                            "explanation": "There are three major phases to the bootup process of a Cisco router: Perform the POST and load the bootstrap program. Locate and load the Cisco IOS software. Locate and load the startup configuration file If a startup configuration file cannot be located, the router will enter setup mode by displaying the setup mode prompt."
                        },
                        {
                            "question": "Match the command with the device mode at which the command is entered. (Not all options are used.)",
                            "options": [],
                            "correct_answers": [],
                            "explanation": "The enable command is entered in R1> mode. The login command is entered in R1(config-line)# mode. The copy running-config startup-config command is entered in R1# mode. The ip address 192.168.4.4 255.255.255.0 command is entered in R1(config-if)# mode. The service password-encryption command is entered in global configuration mode."
                        },
                        {
                            "question": "What are two functions of NVRAM? (Choose two.)",
                            "options": [
                                "to store the routing table",
                                "to retain contents when power is removed",
                                "to store the startup configuration file",
                                "to contain the running configuration file",
                                "to store the ARP table"
                            ],
                            "correct_answers": [
                                "to retain contents when power is removed",
                                "to store the startup configuration file"
                            ],
                            "explanation": "NVRAM is permanent memory storage, so the startup configuration file is preserved even if the router loses power."
                        },
                        {
                            "question": "A router boots and enters setup mode. What is the reason for this?",
                            "options": [
                                "The IOS image is corrupt.",
                                "Cisco IOS is missing from flash memory.",
                                "The configuration file is missing from NVRAM.",
                                "The POST process has detected hardware failure."
                            ],
                            "correct_answers": [
                                "The configuration file is missing from NVRAM."
                            ],
                            "explanation": "If a router cannot locate the startup-config file in NVRAM, it will enter setup mode to allow the configuration to be entered from the console device."
                        },
                        {
                            "question": "The global configuration command ip default-gateway 172.16.100.1 is applied to a switch. What is the effect of this command?",
                            "options": [
                                "The switch will have a management interface with the address 172.16.100.1.",
                                "The switch can be remotely managed from a host on another network.",
                                "The switch can communicate with other hosts on the 172.16.100.0 network.",
                                "The switch is limited to sending and receiving frames to and from the gateway 172.16.100.1."
                            ],
                            "correct_answers": [
                                "The switch can be remotely managed from a host on another network."
                            ],
                            "explanation": "A default gateway address is typically configured on all devices to allow them to communicate beyond just their local network.In a switch this is achieved using the command ip default-gateway ."
                        },
                        {
                            "question": "What happens when the transport input ssh command is entered on the switch vty lines?",
                            "options": [
                                "The SSH client on the switch is enabled.",
                                "Communication between the switch and remote users is encrypted.",
                                "The switch requires a username/password combination for remote access.",
                                "The switch requires remote connections via a proprietary client software."
                            ],
                            "correct_answers": [
                                "Communication between the switch and remote users is encrypted."
                            ],
                            "explanation": "The transport input ssh command when entered on the switch vty (virtual terminal lines) will encrypt all inbound controlled telnet connections."
                        },
                        {
                            "question": "Refer to the exhibit. A user PC has successfully transmitted packets to www.cisco.com. Which IP address does the user PC target in order to forward its data off the local network?",
                            "options": [
                                "172.24.255.17",
                                "172.24.1.22",
                                "172.20.0.254",
                                "172.24.255.4",
                                "172.20.1.18"
                            ],
                            "correct_answers": [
                                "172.20.0.254"
                            ]
                        },
                        {
                            "question": "Match the configuration mode with the command that is available in that mode. (Not all options are used.)",
                            "options": [],
                            "correct_answers": [],
                            "explanation": "The enable command is entered at the R1> prompt. The login command is entered at the R1(config-line)# prompt. The copy running-config startup-config command is entered at the R1# prompt. The interface fastethernet 0/0 command is entered at the R1(config)# prompt."
                        },
                        {
                            "question": "Which three commands are used to set up secure access to a router through a connection to the console interface? (Choose three.)",
                            "options": [
                                "interface fastethernet 0/0",
                                "line vty 0 4",
                                "line console 0",
                                "enable secret cisco",
                                "login",
                                "password cisco"
                            ],
                            "correct_answers": [
                                "line console 0",
                                "login",
                                "password cisco"
                            ],
                            "explanation": "The three commands needed to password protect the console port are as follows: line console 0 password cisco login The interface fastethernet 0/0 command is commonly used to access the configuration mode used to apply specific parameters such as the IP address to the Fa0/0 port. The line vty 0 4 command is used to access the configuration mode for Telnet. The0and 4 parameters specify ports 0 through 4, or a maximum of five simultaneous Telnet connections. The enable secret command is used to apply a password used on the router to access the privileged mode."
                        },
                        {
                            "question": "Refer to the exhibit. Consider the IP address configuration shown from PC1. What is a description of the default gateway address?",
                            "options": [
                                "It is the IP address of the Router1 interface that connects the company to the Internet.",
                                "It is the IP address of the Router1 interface that connects the PC1 LAN to Router1.",
                                "It is the IP address of Switch1 that connects PC1 to other devices on the same LAN.",
                                "It is the IP address of the ISP network device located in the cloud."
                            ],
                            "correct_answers": [
                                "It is the IP address of the Router1 interface that connects the PC1 LAN to Router1."
                            ],
                            "explanation": "The default gateway is used to route packets destined for remote networks. The default gateway IP address is the address of the first Layer 3 device (the router interface) that connects to the same network."
                        },
                        {
                            "question": "Which two functions are primary functions of a router? (Choose two.)",
                            "options": [
                                "packet forwarding",
                                "microsegmentation",
                                "domain name resolution",
                                "path selection",
                                "flow control"
                            ],
                            "correct_answers": [
                                "packet forwarding",
                                "path selection"
                            ],
                            "explanation": "A router accepts a packet and accesses its routing table to determine the appropriate exit interface based on the destination address. The router then forwards the packet out of that interface."
                        },
                        {
                            "question": "What is the effect of using the Router# copy running-config startup-config command on a router?",
                            "options": [
                                "The contents of ROM will change.",
                                "The contents of RAM will change.",
                                "The contents of NVRAM will change.",
                                "The contents of flash will change."
                            ],
                            "correct_answers": [
                                "The contents of NVRAM will change."
                            ],
                            "explanation": "The command copy running-config startup-config copies the running-configuration file from RAM into NVRAM and saves it as the startup-configuration file. Since NVRAM is none-volatile memory it will be able to retain the configuration details when the router is powered off."
                        },
                        {
                            "question": "What will happen if the default gateway address is incorrectly configured on a host?",
                            "options": [
                                "The host cannot communicate with other hosts in the local network.",
                                "The switch will not forward packets initiated by the host.",
                                "The host will have to use ARP to determine the correct address of the default gateway.",
                                "The host cannot communicate with hosts in other networks.",
                                "A ping from the host to 127.0.0.1 would not be successful."
                            ],
                            "correct_answers": [
                                "The host cannot communicate with hosts in other networks."
                            ],
                            "explanation": "When a host needs to send a message to another host located on the same network, it can forward the message directly. However, when a host needs to send a message to a remote network, it must use the router, also known as the default gateway. This is because the data link frame address of the remote destination host cannot be used directly. Instead, the IP packet has to be sent to the router (default gateway) and the router will forward the packet toward its destination. Therefore, if the default gateway is incorrectly configured, the host can communicate with other hosts on the same network, but not with hosts on remote networks."
                        },
                        {
                            "question": "What are two potential network problems that can result from ARP operation? (Choose two.)",
                            "options": [
                                "Manually configuring static ARP associations could facilitate ARP poisoning or MAC address spoofing.",
                                "On large networks with low bandwidth, multiple ARP broadcasts could cause data communication delays.",
                                "Network attackers could manipulate MAC address and IP address mappings in ARP messages with the intent of intercepting network traffic.",
                                "Large numbers of ARP request broadcasts could cause the host MAC address table to overflow and prevent the host from communicating on the network.",
                                "Multiple ARP replies result in the switch MAC address table containing entries that match the MAC addresses of hosts that are connected to the relevant switch port."
                            ],
                            "correct_answers": [
                                "On large networks with low bandwidth, multiple ARP broadcasts could cause data communication delays.",
                                "Network attackers could manipulate MAC address and IP address mappings in ARP messages with the intent of intercepting network traffic."
                            ],
                            "explanation": "Large numbers of ARP broadcast messages could cause momentary data communications delays. Network attackers could manipulate MAC address and IP address mappings in ARP messages with the intent to intercept network traffic. ARP requests and replies cause entries to be made into the ARP table, not the MAC address table. ARP table overflows are very unlikely. Manually configuring static ARP associations is a way to prevent, not facilitate, ARP poisoning and MAC address spoofing. Multiple ARP replies resulting in the switch MAC address table containing entries that match the MAC addresses of connected nodes and are associated with the relevant switch port are required for normal switch frame forwarding operations. It is not an ARP caused network problem."
                        },
                        {
                            "question": "Open the PT activity. Perform the tasks in the activity instructions and then answer the question.",
                            "options": [],
                            "correct_answers": [],
                            "explanation": "The command to use for this activity is show ip interface brief in each router. The active and operational interfaces are represented by the value \u201cup\u201d in the \u201cStatus\u201d and \u201cProtocol\u201d columns. The interfaces in R1 with these characteristics are G0/0 and S0/0/0. In R2 they are G0/1 and S0/0/0."
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header used to identify the next level protocol?",
                            "options": [
                                "protocol",
                                "destination IPv4 address",
                                "source IPv4 address",
                                "TTL"
                            ],
                            "correct_answers": [
                                "protocol"
                            ]
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header that contains an 8-bit binary value used to determine the priority of each packet?",
                            "options": [
                                "differentiated services",
                                "destination IPv4 address",
                                "source IPv4 address",
                                "protocol"
                            ],
                            "correct_answers": [
                                "differentiated services"
                            ]
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header that contains a 32-bit binary value associated with an interface on the sending device?",
                            "options": [
                                "source IPv4 address",
                                "destination IPv4 address",
                                "protocol",
                                "TTL"
                            ],
                            "correct_answers": [
                                "source IPv4 address"
                            ]
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header used to detect corruption in the IPv4 header?",
                            "options": [
                                "header checksum",
                                "source IPv4 address",
                                "protocol",
                                "TTL"
                            ],
                            "correct_answers": [
                                "header checksum"
                            ],
                            "explanation": "The header checksum is used to determine if any errors have been introduced during transmission."
                        },
                        {
                            "question": "",
                            "options": [
                                "10.27.14.148",
                                "10.27.14.1",
                                "10.14.15.254",
                                "203.0.113.39",
                                "10.27.15.17"
                            ],
                            "correct_answers": [
                                "10.27.14.148"
                            ]
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header that contains a unicast, multicast, or broadcast address?",
                            "options": [
                                "destination IPv4 address",
                                "protocol",
                                "TTL",
                                "header checksum"
                            ],
                            "correct_answers": [
                                "destination IPv4 address"
                            ]
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header used to limit the lifetime of a packet?",
                            "options": [
                                "TTL",
                                "source IPv4 address",
                                "protocol",
                                "header checksum"
                            ],
                            "correct_answers": [
                                "TTL"
                            ]
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header that contains a 4-bit binary value set to 0100?",
                            "options": [
                                "version",
                                "source IPv4 address",
                                "protocol",
                                "TTL"
                            ],
                            "correct_answers": [
                                "version"
                            ]
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header used to identify the next level protocol?",
                            "options": [
                                "protocol",
                                "version",
                                "differentiated services",
                                "header checksum"
                            ],
                            "correct_answers": [
                                "protocol"
                            ]
                        },
                        {
                            "question": "Which term describes a field in the IPv4 packet header that contains a 4-bit binary value set to 0100?",
                            "options": [
                                "version",
                                "differentiated services",
                                "header checksum",
                                "TTL"
                            ],
                            "correct_answers": [
                                "version"
                            ]
                        },
                        {
                            "question": "What property of ARP causes cached IP-to-MAC mappings to remain in memory longer?",
                            "options": [
                                "Entries in an ARP table are time-stamped and are purged after the timeout expires.",
                                "A static IP-to-MAC address entry can be entered manually into an ARP table.",
                                "The type field 0x806 appears in the header of the Ethernet frame.",
                                "The port-to-MAC address table on a switch has the same entries as the ARP table on the switch."
                            ],
                            "correct_answers": [
                                "Entries in an ARP table are time-stamped and are purged after the timeout expires."
                            ]
                        },
                        {
                            "question": "What property of ARP allows MAC addresses of frequently used servers to be fixed in the ARP table?",
                            "options": [
                                "A static IP-to-MAC address entry can be entered manually into an ARP table.",
                                "Entries in an ARP table are time-stamped and are purged after the timeout expires.",
                                "The type field 0x806 appears in the header of the Ethernet frame.",
                                "The port-to-MAC address table on a switch has the same entries as the ARP table on the switch."
                            ],
                            "correct_answers": [
                                "A static IP-to-MAC address entry can be entered manually into an ARP table."
                            ]
                        },
                        {
                            "question": "What property of ARP allows MAC addresses of frequently used servers to be fixed in the ARP table?",
                            "options": [
                                "A static IP-to-MAC address entry can be entered manually into an ARP table.",
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame.",
                                "The source MAC address appears in the header of the Ethernet frame.",
                                "The port-to-MAC address table on a switch has the same entries as the ARP table on the switch."
                            ],
                            "correct_answers": [
                                "A static IP-to-MAC address entry can be entered manually into an ARP table."
                            ]
                        },
                        {
                            "question": "What property of ARP allows hosts on a LAN to send traffic to remote networks?",
                            "options": [
                                "Local hosts learn the MAC address of the default gateway.",
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame.",
                                "The source MAC address appears in the header of the Ethernet frame.",
                                "The port-to-MAC address table on a switch has the same entries as the ARP table on the switch."
                            ],
                            "correct_answers": [
                                "Local hosts learn the MAC address of the default gateway."
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "192.168.235.234",
                                "192.168.235.1",
                                "10.234.235.254",
                                "203.0.113.3",
                                "192.168.234.114"
                            ],
                            "correct_answers": [
                                "192.168.235.234"
                            ]
                        },
                        {
                            "question": "What property of ARP forces all Ethernet NICs to process an ARP request?",
                            "options": [
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame.",
                                "The source MAC address appears in the header of the Ethernet frame.",
                                "The type field 0x806 appears in the header of the Ethernet frame.",
                                "ARP replies are broadcast on the network when a host receives an ARP request."
                            ],
                            "correct_answers": [
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame."
                            ]
                        },
                        {
                            "question": "What property of ARP causes a reply only to the source sending an ARP request?",
                            "options": [
                                "The source MAC address appears in the header of the Ethernet frame.",
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame.",
                                "The type field 0x806 appears in the header of the Ethernet frame.",
                                "ARP replies are broadcast on the network when a host receives an ARP request."
                            ],
                            "correct_answers": [
                                "The source MAC address appears in the header of the Ethernet frame."
                            ]
                        },
                        {
                            "question": "What property of ARP causes the request to be flooded out all ports of a switch except for the port receiving the ARP request?",
                            "options": [
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame.",
                                "The type field 0x806 appears in the header of the Ethernet frame.",
                                "Entries in an ARP table are time-stamped and are purged after the timeout expires.",
                                "ARP replies are broadcast on the network when a host receives an ARP request."
                            ],
                            "correct_answers": [
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame."
                            ]
                        },
                        {
                            "question": "What property of ARP causes the NICs receiving an ARP request to pass the data portion of the Ethernet frame to the ARP process?",
                            "options": [
                                "The type field 0x806 appears in the header of the Ethernet frame.",
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame.",
                                "Entries in an ARP table are time-stamped and are purged after the timeout expires.",
                                "ARP replies are broadcast on the network when a host receives an ARP request."
                            ],
                            "correct_answers": [
                                "The type field 0x806 appears in the header of the Ethernet frame."
                            ]
                        },
                        {
                            "question": "What property of ARP causes the NICs receiving an ARP request to pass the data portion of the Ethernet frame to the ARP process?",
                            "options": [
                                "The type field 0x806 appears in the header of the Ethernet frame.",
                                "The destination MAC address FF-FF-FF-FF-FF-FF appears in the header of the Ethernet frame.",
                                "Entries in an ARP table are time-stamped and are purged after the timeout expires.",
                                "The port-to-MAC address table on a switch has the same entries as the ARP table on the switch."
                            ],
                            "correct_answers": [
                                "The type field 0x806 appears in the header of the Ethernet frame."
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "172.29.157.156",
                                "172.29.157.1",
                                "10.156.157.254",
                                "198.51.100.177",
                                "172.29.156.36"
                            ],
                            "correct_answers": [
                                "172.29.157.156"
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "192.168.191.189",
                                "192.168.191.1",
                                "10.190.191.254",
                                "198.51.100.213",
                                "192.168.190.70"
                            ],
                            "correct_answers": [
                                "192.168.191.189"
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "192.168.225.223",
                                "192.168.225.1",
                                "10.224.225.254",
                                "203.0.113.246",
                                "192.168.224.103"
                            ],
                            "correct_answers": [
                                "192.168.225.223"
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "10.118.62.196",
                                "10.118.62.1",
                                "10.62.63.254",
                                "209.165.200.87",
                                "10.118.63.65"
                            ],
                            "correct_answers": [
                                "10.118.62.196"
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "172.19.98.230",
                                "172.19.98.1",
                                "10.98.99.254",
                                "209.165.200.120",
                                "172.19.99.99"
                            ],
                            "correct_answers": [
                                "172.19.98.230"
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "172.20.132.13",
                                "172.20.132.1",
                                "10.132.133.254",
                                "198.51.100.156",
                                "172.20.133.132"
                            ],
                            "correct_answers": [
                                "172.20.132.13"
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "192.168.167.166",
                                "192.168.167.1",
                                "10.166.167.254",
                                "198.51.100.189",
                                "192.168.166.46"
                            ],
                            "correct_answers": [
                                "192.168.167.166"
                            ]
                        },
                        {
                            "question": "",
                            "options": [
                                "192.168.201.200",
                                "192.168.201.1",
                                "10.200.201.254",
                                "203.0.113.222",
                                "192.168.200.80"
                            ],
                            "correct_answers": [
                                "192.168.201.200"
                            ],
                            "explanation": "for Question 18 should probably say: \u201c\u2026and a remote default route, \u2026\u201d"
                        }
                    ]
                `;
        
                let data;
        
                try {
                    data = JSON.parse(rawJson);
                } catch (e) {
                    return showError('Invalid embedded JSON.');
                }
        
                if (!Array.isArray(data)) {
                    return showError('Invalid JSON: expected an array of questions.');
                }
        
                data = sanitizeQuestions(data);
        
                originalQuestions = data.map(q => ({
                    ...q,
                    options: Array.isArray(q.options) ? [...q.options] : []
                }));
        
                questions = shuffle(originalQuestions).map(q => ({
                    ...q,
                    options: Array.isArray(q.options) ? shuffle([...q.options]) : []
                }));
        
                showQuestion();
            } catch (err) {
                showError('Error loading JSON: ' + err.message);
                console.error(err);
            }
        }
        
        function showError(msg) {
            container.textContent = msg;
        }
        
        function createEl(tag, props = {}, children = []) {
            const el = document.createElement(tag);
            Object.assign(el, props);
            children.forEach(child => el.appendChild(child));
            return el;
        }
        
        function showQuestion() {
            container.innerHTML = '';
            answered = false;
        
            nextBtn.onclick = null;
            nextBtn.disabled = false;
            nextBtn.textContent = 'Submit';
        
            if (currentIndex >= questions.length) {
                showFinalSummary();
                return;
            }
        
            const q = questions[currentIndex];
            const wrapper = createEl('div');
        
            const titleLine = q.title ? ("\n" + q.title) : "";
            wrapper.appendChild(createEl('p', { textContent: (q.question || q.title || `Item ${currentIndex + 1}`) + titleLine }));
        
            if (q.image_url) wrapper.appendChild(createImageBlock(q.image_url));
        
            wrapper.appendChild(createOptionsList(q));
        
            wrapper.appendChild(createEl('p', { id: 'explanation-msg', style: 'display:none;' }));
            wrapper.appendChild(createEl('p', { id: 'result-msg' }));
            wrapper.appendChild(createEl('div', {
                className: 'question-counter',
                textContent: `${currentIndex + 1} / ${questions.length}`
            }));
        
            container.appendChild(wrapper);
        }
        
        function createImageBlock(url) {
            const loader = createEl('div', {
                className: 'image-loader',
                id: 'main-loader',
                textContent: 'Loading image...'
            });
        
            const img = createEl('img', {
                src: url,
                style: 'max-width:100%;max-height:500px;margin-bottom:20px;display:none;'
            });
        
            img.onload = () => {
                loader.style.display = 'none';
                img.style.display = 'block';
            };
        
            img.onerror = () => {
                loader.textContent = 'Failed to load image';
                loader.style.color = '#ef4444';
            };
        
            return createEl('div', {}, [loader, img]);
        }
        
        function createOptionsList(q) {
            const list = createEl('ul');
            const isMultiple = q.correct_answers?.length > 1;
        
            q.options.forEach((opt, i) => {
                const li = createEl('li', { id: `li-${i}` });
                const input = createEl('input', {
                    type: isMultiple ? 'checkbox' : 'radio',
                    name: 'answer',
                    value: opt,
                    id: `opt-${i}`
                });
        
                let label;
        
                if (isImage(opt)) {
                    input.dataset.isImage = 'true';
                    label = createImageOption(opt, i);
                } else {
                    label = createEl('label', { htmlFor: `opt-${i}`, textContent: opt });
                }
        
                li.appendChild(input);
                li.appendChild(label);
                list.appendChild(li);
            });
        
            list.querySelectorAll('input[data-is-image="true"]').forEach(i => i.checked = true);
        
            return list;
        }
        
        function isImage(opt) {
            return typeof opt === 'string' &&
                (opt.endsWith('.png') || opt.endsWith('.jpg') || opt.endsWith('.jpeg') || opt.startsWith('http'));
        }
        
        function createImageOption(url, index) {
            const loader = createEl('div', {
                className: 'image-loader',
                id: `loader-${index}`,
                textContent: 'Loading image...'
            });
        
            const img = createEl('img', {
                src: url,
                style: 'max-width:100%;max-height:300px;margin-top:10px;cursor:pointer;display:none;'
            });
        
            img.onload = () => {
                loader.style.display = 'none';
                img.style.display = 'block';
            };
        
            img.onerror = () => {
                loader.textContent = 'Failed to load image';
                loader.style.color = '#ef4444';
            };
        
            return createEl('label', { htmlFor: `opt-${index}` }, [loader, img]);
        }
        
        nextBtn.addEventListener('click', () => {
            const q = questions[currentIndex];
            const inputs = [...document.querySelectorAll('input[name="answer"]')];
            const resultMsg = document.getElementById('result-msg');
            const explanationMsg = document.getElementById('explanation-msg');
        
            if (answered) {
                currentIndex++;
                showQuestion();
                return;
            }
        
            const chosen = inputs.filter(i => i.checked).map(i => i.value);
        
            if (chosen.length === 0 && ALLOW_SKIP) {
                answeredCount++;
                skippedCount++;
        
                inputs.forEach(i => i.disabled = true);
        
                if (resultMsg) resultMsg.textContent = 'Skipped';
                nextBtn.textContent = 'Continue';
                answered = true;
                return;
            }
        
            if (chosen.length === 0) {
                if (resultMsg) resultMsg.textContent = 'Please choose an answer.';
                return;
            }
        
            const correct = chosen.length === q.correct_answers.length &&
                chosen.every(a => q.correct_answers.includes(a));
        
            inputs.forEach(i => i.disabled = true);
        
            answeredCount++;
        
            if (!correct) {
                markAnswers(q, chosen);
        
                if (resultMsg) resultMsg.textContent = 'Wrong!';
                if (explanationMsg) {
                    explanationMsg.style.display = 'block';
                    explanationMsg.textContent = q.explanation || 'No explanation available for this question.';
                }
                nextBtn.textContent = 'Continue';
            } else {
                correctCount++;
                if (resultMsg) resultMsg.textContent = 'Correct!';
            }
        
            answered = true;
        });
        
        function markAnswers(q, chosen) {
            q.options.forEach((opt, index) => {
                const li = document.getElementById(`li-${index}`);
                if (!li) return;
        
                const isCorrect = q.correct_answers.includes(opt);
                const isChosen = chosen.includes(opt);
        
                if (isCorrect) {
                    li.classList.add('correct-answer');
                    li.style.color = '#8bc34a';
                }
                if (isChosen && !isCorrect) {
                    li.classList.add('wrong-answer');
                }
            });
        }
        
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.code === 'Enter') {
                e.preventDefault();
                nextBtn.click();
                return;
            }
        
            const index = (e.key === '0') ? 9 : Number(e.key) - 1;
            if (index < 0 || index > 9) return;
        
            const li = document.getElementById(`li-${index}`);
            if (!li) return;
        
            const label = li.querySelector('label');
            if (label) {
                e.preventDefault();
                label.click();
            }
        });
        
        function showFinalSummary() {
            const total = questions.length;
            const percent = total > 0 ? Math.round((correctCount / total) * 100) : 0;
        
            container.innerHTML = '';
            const summary = createEl('div');
        
            const headline = createEl('p', { textContent: 'Results' });
            const details = createEl('p', {
                textContent: `Correct: ${correctCount} of ${total}  â¢  ${percent}%  â¢  Skipped: ${skippedCount}`
            });
        
            const btnBar = createEl('div', { className: 'summary-actions' });
        
            const restart = createEl('button', { textContent: 'Restart' });
            restart.addEventListener('click', restartQuiz);
        
            const review = createEl('button', { textContent: 'Review answers' });
            review.addEventListener('click', reviewAll);
        
            btnBar.appendChild(restart);
            btnBar.appendChild(review);
        
            summary.appendChild(headline);
            summary.appendChild(details);
            summary.appendChild(btnBar);
        
            container.appendChild(summary);
        
            nextBtn.textContent = 'Done';
            nextBtn.disabled = true;
            nextBtn.onclick = null;
        }
        
        function restartQuiz() {
            correctCount = 0;
            answeredCount = 0;
            skippedCount = 0;
            currentIndex = 0;
            answered = false;
        
            questions = shuffle(originalQuestions).map(q => ({
                ...q,
                options: Array.isArray(q.options) ? shuffle([...q.options]) : []
            }));
        
            container.innerHTML = '';
            nextBtn.disabled = false;
            nextBtn.textContent = 'Submit';
            nextBtn.onclick = null;
        
            showQuestion();
        }
        
        function reviewAll() {
            container.innerHTML = '';
        
            const listWrap = createEl('div');
        
            questions.forEach((q, qi) => {
                const block = createEl('div', { className: 'review-block' });
        
                block.appendChild(createEl('p', { textContent: `Question ${qi + 1}: ${q.question}` }));
        
                const ul = createEl('ul');
        
                (q.options || []).forEach((opt) => {
                    const li = createEl('li');
        
                    const isCorrect = (q.correct_answers || []).includes(opt);
                    const lab = createEl('label', {
                        textContent: opt,
                        style: isCorrect ? 'border-color:#8bc34a; color:#8bc34a; font-weight:600;' : ''
                    });
        
                    li.appendChild(lab);
                    ul.appendChild(li);
                });
        
                block.appendChild(ul);
        
                if (q.explanation) {
                    block.appendChild(createEl('p', {
                        textContent: q.explanation,
                        className: 'review-explanation'
                    }));
                }
        
                listWrap.appendChild(block);
            });
        
            container.appendChild(listWrap);
        
            nextBtn.disabled = false;
            nextBtn.textContent = 'Back';
        
            nextBtn.onclick = () => {
                nextBtn.onclick = null;
                showFinalSummary();
                nextBtn.disabled = true;
            };
        }
        
        loadQuestions();
    </script>
</body>

</html>
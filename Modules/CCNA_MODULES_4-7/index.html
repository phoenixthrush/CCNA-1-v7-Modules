<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cisco CCNA v7 - Modules 4-7</title>
    <meta name="darkreader-lock">
    <meta name="theme-color" content="#000">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
            font-size: 1.1em;
            color: #e8e6e1;
        }
        
        #questions-container {
            max-width: 900px;
            margin: 0 auto 30px;
            background: #222425;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            padding: 40px;
            border: 1px solid #3a3d3f;
            position: relative;
        }
        
        .question-counter {
            position: absolute;
            bottom: 20px;
            right: 30px;
            font-size: 0.95em;
            color: #8ab4f8;
            font-weight: 600;
        }
        
        #questions-container>div>p:first-child {
            font-size: 1.4em;
            font-weight: 600;
            color: #e8e6e1;
            margin-bottom: 25px;
            line-height: 1.5;
            white-space: pre-line;
        }
        
        #questions-container img {
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        ul {
            list-style-type: none;
            margin: 25px 0;
        }
        
        li {
            margin: 12px 0;
            transition: all 0.3s ease;
        }
        
        input[type="radio"],
        input[type="checkbox"] {
            display: none;
        }
        
        label {
            cursor: pointer;
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #2d2e30;
            border-radius: 8px;
            transition: all 0.3s ease;
            border: 2px solid #3a3d3f;
            color: #e8e6e1;
        }
        
        label:hover {
            background: #3a3d3f;
            border-color: #8ab4f8;
        }
        
        input:checked+label {
            background: #3a3d3f;
            border-color: #8ab4f8;
            font-weight: 500;
            color: #8ab4f8;
        }
        
        input:disabled+label {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        li label img {
            margin: 10px 0 0 0;
            max-width: 100%;
            border-radius: 8px;
        }
        
        .image-loader {
            display: inline-block;
            width: 100%;
            height: 300px;
            background: #2d2e30;
            border-radius: 8px;
            margin: 10px 0 0 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #8ab4f8;
            font-weight: 600;
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        @keyframes pulse {
        
            0%,
            100% {
                opacity: 0.6;
            }
        
            50% {
                opacity: 1;
            }
        }
        
        #result-msg {
            margin-top: 25px;
            font-size: 1.3em;
            font-weight: 700;
            padding: 15px 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        li[style*="color: green"] label {
            color: #8bc34a;
            font-weight: 600;
            border-color: #8bc34a;
        }
        
        li.correct-answer label {
            border: 2px solid #8bc34a;
        }
        
        li.wrong-answer label {
            border: 2px solid #ef4444;
        }
        
        #explanation-msg {
            margin-top: 20px;
            padding: 18px 20px;
            background: #2d2e30;
            border-left: 4px solid #ff9800;
            border-radius: 6px;
            color: #e8e6e1;
            line-height: 1.6;
            font-style: normal;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        #next-btn {
            display: block;
            margin: 30px auto 0;
            background: #8ab4f8;
            color: #181a1b;
            border: none;
            padding: 14px 45px;
            font-size: 1.05em;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(138, 180, 248, 0.3);
        }
        
        #next-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            background: #a8c8ff;
            box-shadow: 0 6px 20px rgba(138, 180, 248, 0.5);
        }
        
        #next-btn:active:not(:disabled) {
            transform: translateY(0);
        }
        
        #next-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        @media (max-width: 768px) {
            #questions-container {
                padding: 25px;
            }
        
            #questions-container>div>p:first-child {
                font-size: 1.2em;
            }
        
            body {
                padding: 20px 10px;
            }
        }
        
        .copyright {
            font-size: 0.85em;
            color: rgba(232, 230, 225, 0.3);
            position: fixed;
            bottom: 15px;
            right: 20px;
            margin: 0;
        }
        
        .copyright a {
            color: rgba(232, 230, 225, 0.3);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .copyright a:hover {
            color: rgba(232, 230, 225, 0.7);
            text-decoration: underline;
        }
        
        .summary-actions {
            margin-top: 20px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .summary-actions button {
            background: #8ab4f8;
            color: #181a1b;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(138, 180, 248, 0.3);
        }
        
        .summary-actions button:hover {
            transform: translateY(-2px);
            background: #a8c8ff;
            box-shadow: 0 6px 20px rgba(138, 180, 248, 0.5);
        }
        
        .review-block {
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #3a3d3f;
        }
        
        .review-explanation {
            margin-top: 10px;
            padding: 12px;
            background: #2d2e30;
            border-left: 4px solid #ff9800;
            border-radius: 6px;
        }
    </style>
</head>

<body>
    <div id="questions-container"></div>
    <button id="next-btn">Submit</button>
    <div class="copyright">
        <a href="https://phoenixthrush.com" target="_blank" rel="noopener noreferrer">Â© 2025-2026 phoenixthrush</a>
    </div>
    <script>
        const ALLOW_SKIP = true;
        
        function shuffle(arr) {
            const a = [...arr];
            for (let i = a.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }
        
        const container = document.getElementById('questions-container');
        const nextBtn = document.getElementById('next-btn');
        
        let questions = [];
        let originalQuestions = [];
        
        let currentIndex = 0;
        let answered = false;
        
        let correctCount = 0;
        let answeredCount = 0;
        let skippedCount = 0;
        
        function sanitizeQuestions(data) {
            const seen = new Set();
            const cleaned = [];
        
            for (const item of data) {
                if (!item || typeof item.question !== 'string') continue;
        
                const question = item.question.trim();
                if (!question) continue;
        
                const optionsRaw = Array.isArray(item.options)
                    ? item.options.filter(o => typeof o === 'string')
                    : [];
                const options = optionsRaw.map(o => o.trim()).filter(o => o.length > 0);
        
                const optMap = new Map(options.map(o => [o.toLowerCase(), o]));
        
                const corrRaw = Array.isArray(item.correct_answers)
                    ? item.correct_answers.filter(o => typeof o === 'string')
                    : [];
        
                let correct = [];
                for (const c of corrRaw) {
                    const cTrim = c.trim();
                    if (!cTrim) continue;
        
                    if (options.includes(cTrim)) {
                        correct.push(cTrim);
                        continue;
                    }
        
                    const mapped = optMap.get(cTrim.toLowerCase());
                    if (mapped) correct.push(mapped);
                }
        
                correct = [...new Set(correct)];
        
                if (options.length === 0 || correct.length === 0) continue;
        
                const key = question.toLowerCase().replace(/\s+/g, ' ');
                if (seen.has(key)) continue;
        
                seen.add(key);
                cleaned.push({ ...item, question, options, correct_answers: correct });
            }
        
            return cleaned;
        }
        
        async function loadQuestions() {
            try {
                const rawJson = `
                    [
                        {
                            "question": "What is the purpose of the OSI physical layer?",
                            "options": [
                                "controlling access to media",
                                "transmitting bits across the local media",
                                "performing error detection on received frames",
                                "exchanging frames between nodes over physical network media"
                            ],
                            "correct_answers": [
                                "transmitting bits across the local media"
                            ]
                        },
                        {
                            "question": "Why are two strands of fiber used for a single fiber optic connection?",
                            "options": [
                                "The two strands allow the data to travel for longer distances without degrading.",
                                "They prevent crosstalk from causing interference on the connection.",
                                "They increase the speed at which the data can travel.",
                                "They allow for full-duplex connectivity."
                            ],
                            "correct_answers": [
                                "They allow for full-duplex connectivity."
                            ]
                        },
                        {
                            "question": "Which characteristic describes crosstalk?",
                            "options": [
                                "the distortion of the network signal from fluorescent lighting",
                                "the distortion of the transmitted messages from signals carried in adjacent wires",
                                "the weakening of the network signal over long cable lengths",
                                "the loss of wireless signal over excessive distance from the access point"
                            ],
                            "correct_answers": [
                                "the distortion of the transmitted messages from signals carried in adjacent wires"
                            ]
                        },
                        {
                            "question": "Which procedure is used to reduce the effect of crosstalk in copper cables?",
                            "options": [
                                "requiring proper grounding connections",
                                "twisting opposing circuit wire pairs together",
                                "wrapping the bundle of wires with metallic shielding",
                                "designing a cable infrastructure to avoid crosstalk interference",
                                "avoiding sharp bends during installation"
                            ],
                            "correct_answers": [
                                "twisting opposing circuit wire pairs together"
                            ]
                        },
                        {
                            "question": "Match the situation with the appropriate use of network media. Place the options in the following order: Copper Cables Fiber optic Wireless horizontal cabling structure backbone cabling in an enterprise guest access in a coffee shop desktop PCs in offices in an enterprise long-haul networks waiting rooms in a hospital 6. A network administrator is measuring the transfer of bits across the company backbone for a mission critical financial application. The administrator notices that the network throughput appears lower than the bandwidth expected. Which three factors could influence the differences in throughput? (Choose three.)",
                            "options": [
                                "the amount of traffic that is currently crossing the network",
                                "the sophistication of the encapsulation method applied to the data",
                                "the type of traffic that is crossing the network",
                                "the latency that is created by the number of network devices that the data is crossing",
                                "the bandwidth of the WAN connection to the Internet",
                                "the reliability of the gigabit Ethernet infrastructure of the backbone"
                            ],
                            "correct_answers": [
                                "the amount of traffic that is currently crossing the network",
                                "the type of traffic that is crossing the network",
                                "the latency that is created by the number of network devices that the data is crossing"
                            ],
                            "explanation": "Throughput usually does not match the specified bandwidth of physical links due to multiple factors. These factors include, the amount of traffic, type of traffic, and latency created by the network devices the data has to cross."
                        },
                        {
                            "question": "With the use of unshielded twisted-pair copper wire in a network, what causes crosstalk within the cable pairs?",
                            "options": [
                                "the magnetic field around the adjacent pairs of wire",
                                "the use of braided wire to shield the adjacent wire pairs",
                                "the reflection of the electrical wave back from the far end of the cable",
                                "the collision caused by two nodes trying to use the media simultaneously"
                            ],
                            "correct_answers": [
                                "the magnetic field around the adjacent pairs of wire"
                            ],
                            "explanation": "Crosstalk is a type of noise, or interference that occurs when signal transmission on one wire interferes with another wire. When current flows through a wire a magnetic field is produced. The produced magnetic field will interface the signal carried in the adjacent wire."
                        },
                        {
                            "question": "Refer to the graphic. What type of cabling is shown? STP UTP coax fiber Explanation: Network cabling include different types of cables: UTP cable consists of four pairs of color-coded wires that have been twisted together and then encased in a flexible plastic sheath. STP cable uses four pairs of wires, each wrapped in a foil shield, which are then wrapped in an overall metallic braid or foil. Coaxial cable uses a copper conductor and a layer of flexible plastic insulation surrounds the copper conductor. Fiber cable is a flexible, extremely thin, transparent strand of glass surrounded by plastic insulation. 11. In addition to the cable length, what two factors could interfere with the communication carried over UTP cables? (Choose two.)",
                            "options": [
                                "crosstalk",
                                "bandwidth",
                                "size of the network",
                                "signal modulation technique",
                                "electromagnetic interference"
                            ],
                            "correct_answers": [
                                "crosstalk",
                                "electromagnetic interference"
                            ],
                            "explanation": "Copper media is widely used in network communications. However, copper media is limited by distance and signal interference. Data is transmitted on copper cables as electrical pulses. The electrical pulses are susceptible to interference from two sources: Electromagnetic interference (EMI) or radio frequency interference (RFI) - EMI and RFI signals can distort and corrupt the data signals being carried by copper media. Crosstalk - Crosstalk is a disturbance caused by the electric or magnetic fields of a signal on one wire interfering with the signal in an adjacent wire."
                        },
                        {
                            "question": "Refer to the graphic. What type of cabling is shown? STP UTP coax fiber 13. Which two devices commonly affect wireless networks? (Choose two.)",
                            "options": [
                                "Blu-ray players",
                                "home theaters",
                                "cordless phones",
                                "microwaves",
                                "incandescent light bulbs",
                                "external hard drives"
                            ],
                            "correct_answers": [
                                "cordless phones",
                                "microwaves"
                            ],
                            "explanation": "Radio Frequency Interference (RFI) is the interference that is caused by radio transmitters and other devices that are transmitting in the same frequency."
                        },
                        {
                            "question": "Which two statements describe the services provided by the data link layer? (Choose two.)",
                            "options": [
                                "It defines the end-to-end delivery addressing scheme.",
                                "It maintains the path between the source and destination devices during the data transmission.",
                                "It manages the access of frames to the network media.",
                                "It provides reliable delivery through link establishment and flow control.",
                                "It ensures that application data will be transmitted according to the prioritization.",
                                "It packages various Layer 3 PDUs into a frame format that is compatible with the network interface."
                            ],
                            "correct_answers": [
                                "It manages the access of frames to the network media.",
                                "It packages various Layer 3 PDUs into a frame format that is compatible with the network interface."
                            ],
                            "explanation": "The data link layer is divided into two sub layers, namely Logical Link Control (LLC) and Media Access Control (MAC). LLC forms a frame from the network layer PDU into a format that conforms to the requirements of the network interface and media. A network layer PDU might be for IPv4 or IPv6. The MAC sub layer defines the media access processes performed by the hardware. It manages the frame access to the network media according to the physical signaling requirements (copper cable, fiber optic, wireless, etc.)"
                        },
                        {
                            "question": "What is the function of the CRC value that is found in the FCS field of a frame?",
                            "options": [
                                "to verify the integrity of the received frame",
                                "to verify the physical address in the frame",
                                "to verify the logical address in the frame",
                                "to compute the checksum header for the data field in the frame"
                            ],
                            "correct_answers": [
                                "to verify the integrity of the received frame"
                            ],
                            "explanation": "The CRC value in the FCS field of the received frame is compared to the computed CRC value of that frame, in order to verify the integrity of the frame. If the two values do not match, then the frame is discarded."
                        },
                        {
                            "question": "What is contained in the trailer of a data-link frame?",
                            "options": [
                                "logical address",
                                "physical address",
                                "data",
                                "error detection"
                            ],
                            "correct_answers": [
                                "error detection"
                            ],
                            "explanation": "The trailer in a data-link frame contains error detection information that is pertinent to the frame included in the FCS field. The header contains control information, such as the addressing, while the area that is indicated by the word \u201cdata\u201d includes the data, transport layer PDU, and the IP header."
                        },
                        {
                            "question": "Which statement describes a characteristic of the frame header fields of the data link layer?",
                            "options": [
                                "They all include the flow control and logical connection fields.",
                                "Ethernet frame header fields contain Layer 3 source and destination addresses.",
                                "They vary depending on protocols.",
                                "They include information on user applications."
                            ],
                            "correct_answers": [
                                "They vary depending on protocols."
                            ],
                            "explanation": "All data link layer protocols encapsulate the Layer 3 PDU within the data field of the frame. However, the structure of the frame and the fields that are contained in the header vary according to the protocol. Different data link layer protocols may use different fields, like priority/quality of service, logical connection control, physical link control, flow control, and congestion control."
                        },
                        {
                            "question": "A network team is comparing physical WAN topologies for connecting remote sites to a headquarters building. Which topology provides high availability and connects some, but not all, remote sites?",
                            "options": [
                                "mesh",
                                "partial mesh",
                                "hub and spoke",
                                "point-to-point"
                            ],
                            "correct_answers": [
                                "partial mesh"
                            ],
                            "explanation": "Partial mesh topologies provide high availability by interconnecting multiple remote sites, but do not require a connection between all remote sites. A mesh topology requires point-to-point links with every system being connected to every other system. A point-to-point topology is where each device is connected to one other device. A hub and spoke uses a central device in a star topology that connects to other point-to-point devices."
                        },
                        {
                            "question": "Which two fields or features does Ethernet examine to determine if a received frame is passed to the data link layer or discarded by the NIC? (Choose two.)",
                            "options": [
                                "auto-MDIX",
                                "CEF",
                                "Frame Check Sequence",
                                "minimum frame size",
                                "source MAC address"
                            ],
                            "correct_answers": [
                                "Frame Check Sequence",
                                "minimum frame size"
                            ],
                            "explanation": "An Ethernet frame is not processed and is discarded if it is smaller than the minimum (64 bytes) or if the calculated frame check sequence (FCS) value does not match the received FCS value. Auto-MDIX (automatic medium-dependent interface crossover) is Layer 1 technology that detects cable straight-through or crossover types. The source MAC address is not used to determine how the frame is received. CEF (Cisco Express Forwarding) is a technology used to expedite Layer 3 switching."
                        },
                        {
                            "question": "Which media communication type does not require media arbitration in the data link layer?",
                            "options": [
                                "deterministic",
                                "half-duplex",
                                "full-duplex",
                                "controlled access"
                            ],
                            "correct_answers": [
                                "full-duplex"
                            ],
                            "explanation": "Half-duplex communication occurs when both devices can both transmit and receive on the medium but cannot do so simultaneously. Full-duplex communication occurs when both devices can transmit and receive on the medium at the same time and therefore does not require media arbitration. Half-duplex communication is typically contention-based, whereas controlled (deterministic) access is applied in technologies where devices take turns to access the medium."
                        },
                        {
                            "question": "Which statement describes an extended star topology?",
                            "options": [
                                "End devices connect to a central intermediate device, which in turn connects to other central intermediate devices.",
                                "End devices are connected together by a bus and each bus connects to a central intermediate device.",
                                "Each end system is connected to its respective neighbor via an intermediate device.",
                                "All end and intermediate devices are connected in a chain to each other."
                            ],
                            "correct_answers": [
                                "End devices connect to a central intermediate device, which in turn connects to other central intermediate devices."
                            ],
                            "explanation": "In an extended star topology, central intermediate devices interconnect other star topologies."
                        },
                        {
                            "question": "What is a characteristic of the LLC sublayer?",
                            "options": [
                                "It provides the logical addressing required that identifies the device.",
                                "It provides delimitation of data according to the physical signaling requirements of the medium.",
                                "It places information in the frame allowing multiple Layer 3 protocols to use the same network interface and media.",
                                "It defines software processes that provide services to the physical layer."
                            ],
                            "correct_answers": [
                                "It places information in the frame allowing multiple Layer 3 protocols to use the same network interface and media."
                            ],
                            "explanation": "The Logical Link Control (LLC) defines the software processes that provide services to the network layer protocols. The information is placed by LLC in the frame and identifies which network layer protocol is being used for the frame. This information allows multiple Layer 3 protocols, such as IPv4 and IPv6, to utilize the same network interface and media."
                        },
                        {
                            "question": "What are three ways that media access control is used in networking? (Choose three.)",
                            "options": [
                                "Ethernet utilizes CSMA/CD.",
                                "Media access control provides placement of data frames onto the media.",
                                "Contention-based access is also known as deterministic.",
                                "802.11 utilizes CSMA/CD.",
                                "Data link layer protocols define the rules for access to different media.",
                                "Networks with controlled access have reduced performance due to data collisions."
                            ],
                            "correct_answers": [
                                "Ethernet utilizes CSMA/CD.",
                                "Media access control provides placement of data frames onto the media.",
                                "Data link layer protocols define the rules for access to different media."
                            ],
                            "explanation": "Wired Ethernet networks use CSMA/CD for media access control. IEEE 802.11 wireless networks use CSMA/CA, a similar method. Media access control defines the way data frames get placed on the media. The controlled access method is deterministic, not a contention-based access to networks. Because each device has its own time to use the medium, controlled access networks such as legacy Token Ring do not have collisions."
                        },
                        {
                            "question": "During the encapsulation process, what occurs at the data link layer for a PC connected to an Ethernet network?",
                            "options": [
                                "An IP address is added.",
                                "The logical address is added.",
                                "The physical address is added.",
                                "The process port number is added."
                            ],
                            "correct_answers": [
                                "The physical address is added."
                            ],
                            "explanation": "The Ethernet frame includes the source and destination physical address. The trailer includes a CRC value in the Frame Check Sequence field to allow the receiving device to determine if the frame has been changed (has errors) during the transmission."
                        },
                        {
                            "question": "What three items are contained in an Ethernet header and trailer? (Choose three.)",
                            "options": [
                                "source IP address",
                                "source MAC address",
                                "destination IP address",
                                "destination MAC address",
                                "error-checking information"
                            ],
                            "correct_answers": [
                                "source MAC address",
                                "destination MAC address",
                                "error-checking information"
                            ],
                            "explanation": "Layer 2 headers contain the following: Frame start and stop indicator flags at the beginning and end of a frame Addressing - for Ethernet networks this part of the header contains source and destination MAC addresses Type field to indicate what Layer 3 protocol is being used Error detection to determine if the frame arrived without error"
                        },
                        {
                            "question": "What type of communication rule would best describe CSMA/CD?",
                            "options": [
                                "access method",
                                "flow control",
                                "message encapsulation",
                                "message encoding"
                            ],
                            "correct_answers": [
                                "access method"
                            ],
                            "explanation": "Carrier sense multiple access collision detection (CSMA/CD) is the access method used with Ethernet. The access method rule of communication dictates how a network device is able to place a signal on the carrier. CSMA/CD dictates those rules on an Ethernet network and CSMA/CA dictates those rules on an 802.11 wireless LAN."
                        },
                        {
                            "question": "Which three basic parts are common to all frame types supported by the data link layer? (Choose three.)",
                            "options": [
                                "header",
                                "type field",
                                "MTU size",
                                "data",
                                "trailer",
                                "CRC value"
                            ],
                            "correct_answers": [
                                "header",
                                "data",
                                "trailer"
                            ],
                            "explanation": "The data link protocol is responsible for NIC-to-NIC communications within the same network. Although there are many different data link layer protocols that describe data link layer frames, each frame type has three basic parts: Header Data Trailer"
                        },
                        {
                            "question": "Which statement is true about the CSMA/CD access method that is used in Ethernet?",
                            "options": [
                                "When a device hears a carrier signal and transmits, a collision cannot occur.",
                                "A jamming signal causes only devices that caused the collision to execute a backoff algorithm.",
                                "All network devices must listen before transmitting.",
                                "Devices involved in a collision get priority to transmit after the backoff period."
                            ],
                            "correct_answers": [
                                "All network devices must listen before transmitting."
                            ],
                            "explanation": "Legacy bus-topology Ethernet LAN uses CSMA/CD as network media access control protocol. It works by detecting a collision in the medium and backing off (after transmitting a jam signal) as necessary. When one host wants to transmit a frame, it listens on the medium to check if the medium is busy. After it senses that no one else is transmitting, the host starts transmitting the frame, it also monitors the current level to detect a collision. If it detects a collision, it transmits a special jam signal so that all other hosts can know there was a collision. The other host will receive this jam signal and stop transmitting. After this, both hosts enter an exponential backoff phase and retry transmission."
                        },
                        {
                            "question": "What is the auto-MDIX feature on a switch?",
                            "options": [
                                "the automatic configuration of an interface for 10/100/1000 Mb/s operation",
                                "the automatic configuration of an interface for a straight-through or a crossover Ethernet cable connection",
                                "the automatic configuration of full-duplex operation over a single Ethernet copper or optical cable",
                                "the ability to turn a switch interface on or off accordingly if an active connection is detected"
                            ],
                            "correct_answers": [
                                "the automatic configuration of an interface for a straight-through or a crossover Ethernet cable connection"
                            ],
                            "explanation": "The auto-MDIX enables a switch to use a crossover or a straight-through Ethernet cable to connect to a device regardless of the device on the other end of the connection."
                        },
                        {
                            "question": "Refer to the exhibit. What is the destination MAC address of the Ethernet frame as it leaves the web server if the final destination is PC1?",
                            "options": [
                                "00-60-2F-3A-07-AA",
                                "00-60-2F-3A-07-BB",
                                "00-60-2F-3A-07-CC",
                                "00-60-2F-3A-07-DD"
                            ],
                            "correct_answers": [
                                "00-60-2F-3A-07-CC"
                            ],
                            "explanation": "The destination MAC address is used for local delivery of Ethernet frames. The MAC (Layer 2) address changes at each network segment along the path. As the frame leaves the web server, it will be delivered by using the MAC address of the default gateway."
                        },
                        {
                            "question": "A Layer 2 switch is used to switch incoming frames from a 1000BASE-T port to a port connected to a 100Base-T network. Which method of memory buffering would work best for this task?",
                            "options": [
                                "port-based buffering",
                                "level 1 cache buffering",
                                "shared memory buffering",
                                "fixed configuration buffering"
                            ],
                            "correct_answers": [
                                "shared memory buffering"
                            ],
                            "explanation": "With shared memory buffering, the number of frames stored in the buffer is restricted only by the of the entire memory buffer and not limited to a single port buffer. This permits larger frames to be transmitted with fewer dropped frames. This is important to asymmetric switching, which applies to this scenario, where frames are being exchanged between ports of different rates. With port-based memory buffering, frames are stored in queues that are linked to specific incoming and outgoing ports making it possible for a single frame to delay the transmission of all the frames in memory because of a busy destination port. Level 1 cache is memory used in a CPU. Fixed configuration refers to the port arrangement in switch hardware."
                        },
                        {
                            "question": "What is the purpose of the FCS field in a frame?",
                            "options": [
                                "to obtain the MAC address of the sending node",
                                "to verify the logical address of the sending node",
                                "to compute the CRC header for the data field",
                                "to determine if errors occurred in the transmission and reception"
                            ],
                            "correct_answers": [
                                "to determine if errors occurred in the transmission and reception"
                            ],
                            "explanation": "The FCS field in a frame is used to detect any errors in the transmission and receipt of a frame. This is done by comparing the CRC value within the frame against a computed CRC value of the frame. If the two values do not match, then the frame is discarded."
                        },
                        {
                            "question": "Which switching method has the lowest level of latency?",
                            "options": [
                                "cut-through",
                                "store-and-forward",
                                "fragment-free",
                                "fast-forward"
                            ],
                            "correct_answers": [
                                "fast-forward"
                            ],
                            "explanation": "Fast-forward switching begins to forward a frame after reading the destination MAC address, resulting in the lowest latency. Fragment-free reads the first 64 bytes before forwarding. Store-and-forward has the highest latency because it reads the entire frame before beginning to forward it. Both fragment-free and fast-forward are types of cut-through switching."
                        },
                        {
                            "question": "A network administrator is connecting two modern switches using a straight-through cable. The switches are new and have never been configured. Which three statements are correct about the final result of the connection? (Choose three.)",
                            "options": [
                                "The link between the switches will work at the fastest speed that is supported by both switches.",
                                "The link between switches will work as full-duplex.",
                                "If both switches support different speeds, they will each work at their own fastest speed.",
                                "The auto-MDIX feature will configure the interfaces eliminating the need for a crossover cable.",
                                "The connection will not be possible unless the administrator changes the cable to a crossover cable.",
                                "The duplex capability has to be manually configured because it cannot be negotiated."
                            ],
                            "correct_answers": [
                                "The link between the switches will work at the fastest speed that is supported by both switches.",
                                "The link between switches will work as full-duplex.",
                                "The auto-MDIX feature will configure the interfaces eliminating the need for a crossover cable."
                            ],
                            "explanation": "Modern switches can negotiate to work in full-duplex mode if both switches are capable. They will negotiate to work using the fastest possible speed and the auto-MDIX feature is enabled by default, so a cable change is not needed."
                        },
                        {
                            "question": "Which advantage does the store-and-forward switching method have compared with the cut-through switching method?",
                            "options": [
                                "collision detecting",
                                "frame error checking",
                                "faster frame forwarding",
                                "frame forwarding using IPv4 Layer 3 and 4 information"
                            ],
                            "correct_answers": [
                                "frame error checking"
                            ],
                            "explanation": "A switch using the store-and-forward switching method performs an error check on an incoming frame by comparing the FCS value against its own FCS calculations after the entire frame is received. In comparison, a switch using the cut-through switching method makes quick forwarding decisions and starts the forwarding process without waiting for the entire frame to be received. Thus a switch using cut-through switching may send invalid frames to the network. The performance of store-and-forward switching is slower compared to cut-through switching performance. Collision detection is monitored by the sending device. Store-and-forward switching does not use IPv4 Layer 3 and 4 information for its forwarding decisions."
                        },
                        {
                            "question": "When the store-and-forward method of switching is in use, what part of the Ethernet frame is used to perform an error check?",
                            "options": [
                                "CRC in the trailer",
                                "source MAC address in the header",
                                "destination MAC address in the header",
                                "protocol type in the header"
                            ],
                            "correct_answers": [
                                "CRC in the trailer"
                            ],
                            "explanation": "The cyclic redundancy check (CRC) part of the trailer is used to determine if the frame has been modified during transit. If the integrity of the frame is verified, the frame is forwarded. If the integrity of the frame cannot be verified, then the frame is dropped."
                        },
                        {
                            "question": "What are two actions performed by a Cisco switch? (Choose two.)",
                            "options": [
                                "building a routing table that is based on the first IP address in the frame header",
                                "using the source MAC addresses of frames to build and maintain a MAC address table",
                                "forwarding frames with unknown destination IP addresses to the default gateway",
                                "utilizing the MAC address table to forward frames via the destination MAC address",
                                "examining the destination MAC address to add new entries to the MAC address table"
                            ],
                            "correct_answers": [
                                "using the source MAC addresses of frames to build and maintain a MAC address table",
                                "utilizing the MAC address table to forward frames via the destination MAC address"
                            ],
                            "explanation": "Important actions that a switch performs are as follows: When a frame comes in, the switch examines the Layer 2 source address to build and maintain the Layer 2 MAC address table. It examines the Layer 2 destination address to determine how to forward the frame. When the destination address is in the MAC address table, then the frame is sent out a particular port. When the address is unknown, the frame is sent to all ports that have devices connected to that network."
                        },
                        {
                            "question": "Which two statements describe features or functions of the logical link control sublayer in Ethernet standards? (Choose two.)",
                            "options": [
                                "Logical link control is implemented in software.",
                                "Logical link control is specified in the IEEE 802.3 standard.",
                                "The LLC sublayer adds a header and a trailer to the data.",
                                "The data link layer uses LLC to communicate with the upper layers of the protocol suite.",
                                "The LLC sublayer is responsible for the placement and retrieval of frames on and off the media."
                            ],
                            "correct_answers": [
                                "Logical link control is implemented in software.",
                                "The data link layer uses LLC to communicate with the upper layers of the protocol suite."
                            ],
                            "explanation": "Logical link control is implemented in software and enables the data link layer to communicate with the upper layers of the protocol suite. Logical link control is specified in the IEEE 802.2 standard. IEEE 802.3 is a suite of standards that define the different Ethernet types. The MAC (Media Access Control) sublayer is responsible for the placement and retrieval of frames on and off the media. The MAC sublayer is also responsible for adding a header and a trailer to the network layer protocol data unit (PDU)."
                        },
                        {
                            "question": "What is the auto-MDIX feature?",
                            "options": [
                                "It enables a device to automatically configure an interface to use a straight-through or a crossover cable.",
                                "It enables a device to automatically configure the duplex settings of a segment.",
                                "It enables a device to automatically configure the speed of its interface.",
                                "It enables a switch to dynamically select the forwarding method."
                            ],
                            "correct_answers": [
                                "It enables a device to automatically configure an interface to use a straight-through or a crossover cable."
                            ],
                            "explanation": "The auto-MDIX feature allows the device to configure its network port according to the cable type that is used (straight-through or crossover) and the type of device that is connected to that port. When a port of a switch is configured with auto-MDIX, this switch can be connected to another switch by the use of either a straight-through cable or a crossover cable."
                        },
                        {
                            "question": "Which is a multicast MAC address?",
                            "options": [
                                "FF-FF-FF-FF-FF-FF",
                                "5C-26-0A-4B-19-3E",
                                "01-00-5E-00-00-03",
                                "00-26-0F-4B-00-3E"
                            ],
                            "correct_answers": [
                                "01-00-5E-00-00-03"
                            ],
                            "explanation": "Multicast MAC addresses begin with the special value of 01-00-5E."
                        },
                        {
                            "question": "Refer to the exhibit. What is wrong with the displayed termination?",
                            "options": [
                                "The woven copper braid should not have been removed.",
                                "The wrong type of connector is being used.",
                                "The untwisted length of each wire is too long.",
                                "The wires are too thick for the connector that is used."
                            ],
                            "correct_answers": [
                                "The untwisted length of each wire is too long."
                            ],
                            "explanation": "When a cable to an RJ-45 connector is terminated, it is important to ensure that the untwisted wires are not too long and that the flexible plastic sheath surrounding the wires is crimped down and not the bare wires. None of the colored wires should be visible from the bottom of the jack."
                        },
                        {
                            "question": "Refer to the exhibit. The PC is connected to the console port of the switch. All the other connections are made through FastEthernet links. Which types of UTP cables can be used to connect the devices?",
                            "options": [],
                            "correct_answers": [],
                            "explanation": "A straight-through cable is commonly used to interconnect a host to a switch and a switch to a router. A crossover cable is used to interconnect similar devices together like switch to a switch, a host to a host, or a router to a router. If a switch has the MDIX capability, a crossover could be used to connect the switch to the router; however, that option is not available. A rollover cable is used to connect to a router or switch console port."
                        },
                        {
                            "question": "Open the PT Activity. Perform the tasks in the activity instructions and then answer the question. Modules 4 - 7: Ethernet Concepts Exam - Packet Tracer 0.00 KB 18465 downloads ... Download .well.c2a3 .btn { padding: 11px 30px; font-size: 11pt; } .well.c2a3 .media-body { font-size: 11pt; } .well.c2a3 .wpdm_icon { height: 42px; width: auto; } Which port does Switch0 use to send frames to the host with the IPv4 address 10.1.1.5?",
                            "options": [
                                "Fa0/1",
                                "Fa0/5",
                                "Fa0/9",
                                "Fa0/11"
                            ],
                            "correct_answers": [
                                "Fa0/11"
                            ],
                            "explanation": "Issuing the command ipconfig /all from the PC0 command prompt displays the IPv4 address and MAC address. When the IPv4 address 10.1.1.5 is pinged from PC0, the switch stores the source MAC address (from PC0) along with the port to which PC0 is connected. When the destination reply is received, the switch takes the destination MAC address and compares to MAC addresses stored in the MAC address table. Issuing the show mac-address-table on the PC0 Terminal application displays two dynamic MAC address entries. The MAC address and port entry that does not belong to PC0 must be the MAC address and port of the destination with the IPv4 address 10.1.1.5."
                        },
                        {
                            "question": "What does the term \u201cattenuation\u201d mean in data communication?",
                            "options": [
                                "loss of signal strength as distance increases",
                                "time for a signal to reach its destination",
                                "leakage of signals from one cable pair to another",
                                "strengthening of a signal by a networking device"
                            ],
                            "correct_answers": [
                                "loss of signal strength as distance increases"
                            ],
                            "explanation": "Data is transmitted on copper cables as electrical pulses. A detector in the network interface of a destination device must receive a signal that can be successfully decoded to match the signal sent. However, the farther the signal travels, the more it deteriorates. This is referred to as signal attenuation."
                        },
                        {
                            "question": "What makes fiber preferable to copper cabling for interconnecting buildings? (Choose three.)",
                            "options": [
                                "greater distances per cable run",
                                "lower installation cost",
                                "limited susceptibility to EMI/RFI",
                                "durable connections",
                                "greater bandwidth potential",
                                "easily terminated"
                            ],
                            "correct_answers": [
                                "greater distances per cable run",
                                "limited susceptibility to EMI/RFI",
                                "greater bandwidth potential"
                            ],
                            "explanation": "Optical fiber cable transmits data over longer distances and at higher bandwidths than any other networking media. Unlike copper wires, fiber-optic cable can transmit signals with less attenuation and is completely immune to EMI and RFI."
                        },
                        {
                            "question": "What OSI physical layer term describes the process by which one wave modifies another wave?",
                            "options": [
                                "modulation",
                                "IEEE",
                                "EIA/TIA",
                                "air"
                            ],
                            "correct_answers": [
                                "modulation"
                            ]
                        },
                        {
                            "question": "What OSI physical layer term describes the capacity at which a medium can carry data?",
                            "options": [
                                "bandwidth",
                                "IEEE",
                                "EIA/TIA",
                                "air"
                            ],
                            "correct_answers": [
                                "bandwidth"
                            ]
                        },
                        {
                            "question": "What OSI physical layer term describes the measure of the transfer of bits across a medium over a given period of time?",
                            "options": [
                                "throughput",
                                "bandwidth",
                                "latency",
                                "goodput"
                            ],
                            "correct_answers": [
                                "throughput"
                            ]
                        },
                        {
                            "question": "What OSI physical layer term describes the amount of time, including delays, for data to travel from one point to another?",
                            "options": [
                                "latency",
                                "bandwidth",
                                "throughput",
                                "goodput"
                            ],
                            "correct_answers": [
                                "latency"
                            ]
                        },
                        {
                            "question": "What OSI physical layer term describes the amount of time, including delays, for data to travel from one point to another?",
                            "options": [
                                "latency",
                                "fiber-optic cable",
                                "air",
                                "copper cable"
                            ],
                            "correct_answers": [
                                "latency"
                            ]
                        },
                        {
                            "question": "What OSI physical layer term describes the measure of usable data transferred over a given period of time?",
                            "options": [
                                "goodput",
                                "fiber-optic cable",
                                "air",
                                "copper cable"
                            ],
                            "correct_answers": [
                                "goodput"
                            ]
                        },
                        {
                            "question": "What OSI physical layer term describes the physical medium which uses electrical pulses?",
                            "options": [
                                "copper cable",
                                "fiber-optic cable",
                                "air",
                                "goodput"
                            ],
                            "correct_answers": [
                                "copper cable"
                            ]
                        },
                        {
                            "question": "What OSI physical layer term describes the physical medium that uses the propagation of light?",
                            "options": [
                                "fiber-optic cable",
                                "goodput",
                                "latency",
                                "throughput"
                            ],
                            "correct_answers": [
                                "fiber-optic cable"
                            ]
                        },
                        {
                            "question": "What OSI physical layer term describes the physical medium for microwave transmissions?",
                            "options": [
                                "air",
                                "goodput",
                                "latency",
                                "throughput"
                            ],
                            "correct_answers": [
                                "air"
                            ]
                        },
                        {
                            "question": "Which two functions are performed at the MAC sublayer of the OSI data link layer? (Choose two.)",
                            "options": [
                                "Adds Layer 2 control information to network protocol data.",
                                "Places information in the frame that identifies which network layer protocol is being used for the frame.",
                                "Controls the NIC responsible for sending and receiving data on the physical medium.",
                                "Implements a trailer to detect transmission errors.",
                                "Enables IPv4 and IPv6 to utilize the same network interface and media."
                            ],
                            "correct_answers": []
                        },
                        {
                            "question": "Which two functions are performed at the LLC sublayer of the OSI data link layer? (Choose two.)",
                            "options": [
                                "Enables IPv4 and IPv6 to utilize the same network interface and media.",
                                "Places information in the frame that identifies which network layer protocol is being used for the frame.",
                                "Integrates various physical technologies.",
                                "Implements a process to delimit fields within a Layer 2 frame.",
                                "Controls the NIC responsible for sending and receiving data on the physical medium."
                            ],
                            "correct_answers": [
                                "Enables IPv4 and IPv6 to utilize the same network interface and media.",
                                "Places information in the frame that identifies which network layer protocol is being used for the frame."
                            ]
                        },
                        {
                            "question": "Which two functions are performed at the LLC sublayer of the OSI data link layer? (Choose two.)",
                            "options": [
                                "Adds Layer 2 control information to network protocol data.",
                                "Places information in the frame that identifies which network layer protocol is being used for the frame.",
                                "Performs data encapsulation.",
                                "Controls the NIC responsible for sending and receiving data on the physical medium.",
                                "Integrates various physical technologies."
                            ],
                            "correct_answers": [
                                "Adds Layer 2 control information to network protocol data.",
                                "Places information in the frame that identifies which network layer protocol is being used for the frame."
                            ]
                        },
                        {
                            "question": "Which two functions are performed at the LLC sublayer of the OSI data link layer? (Choose two.)",
                            "options": [
                                "Adds Layer 2 control information to network protocol data.",
                                "Enables IPv4 and IPv6 to utilize the same network interface and media.",
                                "Provides data link layer addressing.",
                                "Implements a trailer to detect transmission errors.",
                                "Provides synchronization between source and target nodes."
                            ],
                            "correct_answers": [
                                "Adds Layer 2 control information to network protocol data.",
                                "Enables IPv4 and IPv6 to utilize the same network interface and media."
                            ]
                        },
                        {
                            "question": "Which two functions are performed at the LLC sublayer of the OSI data link layer? (Choose two.)",
                            "options": [
                                "Enables IPv4 and IPv6 to utilize the same network interface and media.",
                                "Adds Layer 2 control information to network protocol data.",
                                "Integrates various physical technologies.",
                                "Implements a trailer to detect transmission errors.",
                                "Provides synchronization between source and target nodes."
                            ],
                            "correct_answers": [
                                "Enables IPv4 and IPv6 to utilize the same network interface and media.",
                                "Adds Layer 2 control information to network protocol data."
                            ]
                        },
                        {
                            "question": "What action will occur if a switch receives a frame with the destination MAC address FF:FF:FF:FF:FF:FF?",
                            "options": [
                                "The switch forwards it out all ports except the ingress port.",
                                "The switch refreshes the timer on that entry.",
                                "The switch does not forward the frame.",
                                "The switch sends the frame to a connected router because the destination MAC address is not local."
                            ],
                            "correct_answers": [
                                "The switch forwards it out all ports except the ingress port."
                            ]
                        },
                        {
                            "question": "What action will occur if a switch receives a frame with the destination MAC address 01:00:5E:00:00:D9?",
                            "options": [
                                "The switch forwards it out all ports except the ingress port.",
                                "The switch does not forward the frame.",
                                "The switch sends the frame to a connected router because the destination MAC address is not local.",
                                "The switch shares the MAC address table entry with any connected switches."
                            ],
                            "correct_answers": [
                                "The switch forwards it out all ports except the ingress port."
                            ]
                        },
                        {
                            "question": "What action will occur if a host receives a frame with a destination MAC address of FF:FF:FF:FF:FF:FF?",
                            "options": [
                                "The host will process the frame.",
                                "The host forwards the frame to the router.",
                                "The host sends the frame to the switch to update the MAC address table.",
                                "The host forwards the frame to all other hosts."
                            ],
                            "correct_answers": [
                                "The host will process the frame."
                            ]
                        },
                        {
                            "question": "What action will occur if a switch receives a frame and does have the source MAC address in the MAC table?",
                            "options": [
                                "The switch refreshes the timer on that entry.",
                                "The switch adds it to its MAC address table associated with the port number.",
                                "The switch forwards the frame to the associated port.",
                                "The switch sends the frame to a connected router because the destination MAC address is not local."
                            ],
                            "correct_answers": [
                                "The switch refreshes the timer on that entry."
                            ]
                        },
                        {
                            "question": "What action will occur if a host receives a frame with a destination MAC address of FF:FF:FF:FF:FF:FF?",
                            "options": [
                                "The host will process the frame.",
                                "The host returns the frame to the switch.",
                                "The host replies to the switch with its own IP address.",
                                "The host forwards the frame to all other hosts."
                            ],
                            "correct_answers": [
                                "The host will process the frame."
                            ]
                        },
                        {
                            "question": "What action will occur if a host receives a frame with a destination MAC address it does not recognize?",
                            "options": [
                                "The host will discard the frame.",
                                "The host replies to the switch with its own IP address.",
                                "The host forwards the frame to all other hosts.",
                                "The host returns the frame to the switch."
                            ],
                            "correct_answers": [
                                "The host will discard the frame."
                            ]
                        },
                        {
                            "question": "Which type of UTP cable is used to connect a PC to a switch port?",
                            "options": [
                                "console",
                                "rollover",
                                "crossover",
                                "straight-through"
                            ],
                            "correct_answers": [
                                "straight-through"
                            ],
                            "explanation": "A rollover cable is a Cisco proprietary cable used to connect to a router or switch console port. A straight-through (also called patch) cable is usually used to interconnect a host to a switch and a switch to a router. A crossover cable is used to interconnect similar devices together, for example, between two switches, two routers, and two hosts."
                        },
                        {
                            "question": "Which type of UTP cable is used to connect a PC to a switch port?",
                            "options": [
                                "console",
                                "rollover",
                                "crossover",
                                "straight-through",
                                ""
                            ],
                            "correct_answers": []
                        }
                    ]
                `;
        
                let data;
        
                try {
                    data = JSON.parse(rawJson);
                } catch (e) {
                    return showError('Invalid embedded JSON.');
                }
        
                if (!Array.isArray(data)) {
                    return showError('Invalid JSON: expected an array of questions.');
                }
        
                data = sanitizeQuestions(data);
        
                originalQuestions = data.map(q => ({
                    ...q,
                    options: Array.isArray(q.options) ? [...q.options] : []
                }));
        
                questions = shuffle(originalQuestions).map(q => ({
                    ...q,
                    options: Array.isArray(q.options) ? shuffle([...q.options]) : []
                }));
        
                showQuestion();
            } catch (err) {
                showError('Error loading JSON: ' + err.message);
                console.error(err);
            }
        }
        
        function showError(msg) {
            container.textContent = msg;
        }
        
        function createEl(tag, props = {}, children = []) {
            const el = document.createElement(tag);
            Object.assign(el, props);
            children.forEach(child => el.appendChild(child));
            return el;
        }
        
        function showQuestion() {
            container.innerHTML = '';
            answered = false;
        
            nextBtn.onclick = null;
            nextBtn.disabled = false;
            nextBtn.textContent = 'Submit';
        
            if (currentIndex >= questions.length) {
                showFinalSummary();
                return;
            }
        
            const q = questions[currentIndex];
            const wrapper = createEl('div');
        
            const titleLine = q.title ? ("\n" + q.title) : "";
            wrapper.appendChild(createEl('p', { textContent: (q.question || q.title || `Item ${currentIndex + 1}`) + titleLine }));
        
            if (q.image_url) wrapper.appendChild(createImageBlock(q.image_url));
        
            wrapper.appendChild(createOptionsList(q));
        
            wrapper.appendChild(createEl('p', { id: 'explanation-msg', style: 'display:none;' }));
            wrapper.appendChild(createEl('p', { id: 'result-msg' }));
            wrapper.appendChild(createEl('div', {
                className: 'question-counter',
                textContent: `${currentIndex + 1} / ${questions.length}`
            }));
        
            container.appendChild(wrapper);
        }
        
        function createImageBlock(url) {
            const loader = createEl('div', {
                className: 'image-loader',
                id: 'main-loader',
                textContent: 'Loading image...'
            });
        
            const img = createEl('img', {
                src: url,
                style: 'max-width:100%;max-height:500px;margin-bottom:20px;display:none;'
            });
        
            img.onload = () => {
                loader.style.display = 'none';
                img.style.display = 'block';
            };
        
            img.onerror = () => {
                loader.textContent = 'Failed to load image';
                loader.style.color = '#ef4444';
            };
        
            return createEl('div', {}, [loader, img]);
        }
        
        function createOptionsList(q) {
            const list = createEl('ul');
            const isMultiple = q.correct_answers?.length > 1;
        
            q.options.forEach((opt, i) => {
                const li = createEl('li', { id: `li-${i}` });
                const input = createEl('input', {
                    type: isMultiple ? 'checkbox' : 'radio',
                    name: 'answer',
                    value: opt,
                    id: `opt-${i}`
                });
        
                let label;
        
                if (isImage(opt)) {
                    input.dataset.isImage = 'true';
                    label = createImageOption(opt, i);
                } else {
                    label = createEl('label', { htmlFor: `opt-${i}`, textContent: opt });
                }
        
                li.appendChild(input);
                li.appendChild(label);
                list.appendChild(li);
            });
        
            list.querySelectorAll('input[data-is-image="true"]').forEach(i => i.checked = true);
        
            return list;
        }
        
        function isImage(opt) {
            return typeof opt === 'string' &&
                (opt.endsWith('.png') || opt.endsWith('.jpg') || opt.endsWith('.jpeg') || opt.startsWith('http'));
        }
        
        function createImageOption(url, index) {
            const loader = createEl('div', {
                className: 'image-loader',
                id: `loader-${index}`,
                textContent: 'Loading image...'
            });
        
            const img = createEl('img', {
                src: url,
                style: 'max-width:100%;max-height:300px;margin-top:10px;cursor:pointer;display:none;'
            });
        
            img.onload = () => {
                loader.style.display = 'none';
                img.style.display = 'block';
            };
        
            img.onerror = () => {
                loader.textContent = 'Failed to load image';
                loader.style.color = '#ef4444';
            };
        
            return createEl('label', { htmlFor: `opt-${index}` }, [loader, img]);
        }
        
        nextBtn.addEventListener('click', () => {
            const q = questions[currentIndex];
            const inputs = [...document.querySelectorAll('input[name="answer"]')];
            const resultMsg = document.getElementById('result-msg');
            const explanationMsg = document.getElementById('explanation-msg');
        
            if (answered) {
                currentIndex++;
                showQuestion();
                return;
            }
        
            const chosen = inputs.filter(i => i.checked).map(i => i.value);
        
            if (chosen.length === 0 && ALLOW_SKIP) {
                answeredCount++;
                skippedCount++;
        
                inputs.forEach(i => i.disabled = true);
        
                if (resultMsg) resultMsg.textContent = 'Skipped';
                nextBtn.textContent = 'Continue';
                answered = true;
                return;
            }
        
            if (chosen.length === 0) {
                if (resultMsg) resultMsg.textContent = 'Please choose an answer.';
                return;
            }
        
            const correct = chosen.length === q.correct_answers.length &&
                chosen.every(a => q.correct_answers.includes(a));
        
            inputs.forEach(i => i.disabled = true);
        
            answeredCount++;
        
            if (!correct) {
                markAnswers(q, chosen);
        
                if (resultMsg) resultMsg.textContent = 'Wrong!';
                if (explanationMsg) {
                    explanationMsg.style.display = 'block';
                    explanationMsg.textContent = q.explanation || 'No explanation available for this question.';
                }
                nextBtn.textContent = 'Continue';
            } else {
                correctCount++;
                if (resultMsg) resultMsg.textContent = 'Correct!';
            }
        
            answered = true;
        });
        
        function markAnswers(q, chosen) {
            q.options.forEach((opt, index) => {
                const li = document.getElementById(`li-${index}`);
                if (!li) return;
        
                const isCorrect = q.correct_answers.includes(opt);
                const isChosen = chosen.includes(opt);
        
                if (isCorrect) {
                    li.classList.add('correct-answer');
                    li.style.color = '#8bc34a';
                }
                if (isChosen && !isCorrect) {
                    li.classList.add('wrong-answer');
                }
            });
        }
        
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.code === 'Enter') {
                e.preventDefault();
                nextBtn.click();
                return;
            }
        
            const index = (e.key === '0') ? 9 : Number(e.key) - 1;
            if (index < 0 || index > 9) return;
        
            const li = document.getElementById(`li-${index}`);
            if (!li) return;
        
            const label = li.querySelector('label');
            if (label) {
                e.preventDefault();
                label.click();
            }
        });
        
        function showFinalSummary() {
            const total = questions.length;
            const percent = total > 0 ? Math.round((correctCount / total) * 100) : 0;
        
            container.innerHTML = '';
            const summary = createEl('div');
        
            const headline = createEl('p', { textContent: 'Results' });
            const details = createEl('p', {
                textContent: `Correct: ${correctCount} of ${total}  â¢  ${percent}%  â¢  Skipped: ${skippedCount}`
            });
        
            const btnBar = createEl('div', { className: 'summary-actions' });
        
            const restart = createEl('button', { textContent: 'Restart' });
            restart.addEventListener('click', restartQuiz);
        
            const review = createEl('button', { textContent: 'Review answers' });
            review.addEventListener('click', reviewAll);
        
            btnBar.appendChild(restart);
            btnBar.appendChild(review);
        
            summary.appendChild(headline);
            summary.appendChild(details);
            summary.appendChild(btnBar);
        
            container.appendChild(summary);
        
            nextBtn.textContent = 'Done';
            nextBtn.disabled = true;
            nextBtn.onclick = null;
        }
        
        function restartQuiz() {
            correctCount = 0;
            answeredCount = 0;
            skippedCount = 0;
            currentIndex = 0;
            answered = false;
        
            questions = shuffle(originalQuestions).map(q => ({
                ...q,
                options: Array.isArray(q.options) ? shuffle([...q.options]) : []
            }));
        
            container.innerHTML = '';
            nextBtn.disabled = false;
            nextBtn.textContent = 'Submit';
            nextBtn.onclick = null;
        
            showQuestion();
        }
        
        function reviewAll() {
            container.innerHTML = '';
        
            const listWrap = createEl('div');
        
            questions.forEach((q, qi) => {
                const block = createEl('div', { className: 'review-block' });
        
                block.appendChild(createEl('p', { textContent: `Question ${qi + 1}: ${q.question}` }));
        
                const ul = createEl('ul');
        
                (q.options || []).forEach((opt) => {
                    const li = createEl('li');
        
                    const isCorrect = (q.correct_answers || []).includes(opt);
                    const lab = createEl('label', {
                        textContent: opt,
                        style: isCorrect ? 'border-color:#8bc34a; color:#8bc34a; font-weight:600;' : ''
                    });
        
                    li.appendChild(lab);
                    ul.appendChild(li);
                });
        
                block.appendChild(ul);
        
                if (q.explanation) {
                    block.appendChild(createEl('p', {
                        textContent: q.explanation,
                        className: 'review-explanation'
                    }));
                }
        
                listWrap.appendChild(block);
            });
        
            container.appendChild(listWrap);
        
            nextBtn.disabled = false;
            nextBtn.textContent = 'Back';
        
            nextBtn.onclick = () => {
                nextBtn.onclick = null;
                showFinalSummary();
                nextBtn.disabled = true;
            };
        }
        
        loadQuestions();
    </script>
</body>

</html>